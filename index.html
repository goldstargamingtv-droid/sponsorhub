<!DOCTYPE html>
<html lang="en">
<head>
    <!-- VERSION: 2024-12-20-v11 - ICON BADGES BELOW GIF! -->
    <!-- ============================================ -->
    <!-- PALETTE 2: WARM LUXE AMBER -->
    <!-- Rich black (#000000) with muted gold (#F59E0B) and warm coral (#FF6B6B) -->
    <!-- Luxurious, inviting, premium warmth -->
    <!-- ============================================ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- SEO Meta Tags -->
    <title>MocapWork - Buy Premium Motion Capture Animations for Games & Film</title>
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="MocapWork - Premium Motion Capture Animations for Games & Film">
    <meta name="description" content="Buy professional motion capture animations for Unreal Engine, Unity, Blender. Studio-quality mocap data with exclusive rights, royalty-free licenses. Instant download for game development and film production.">
    <meta name="keywords" content="motion capture, mocap animations, game animations, Unreal Engine mocap, Unity animations, Blender mocap, 3D animations, game development, film mocap, character animations, FBX animations, professional mocap, buy mocap, royalty-free mocap">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="author" content="MocapWork">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mocapwork.com/">
    <meta property="og:title" content="MocapWork - Premium Motion Capture Animations">
    <meta property="og:description" content="Professional mocap animations for Unreal Engine, Unity, Blender. Studio-quality, exclusive rights, instant download. Perfect for games, films, and 3D projects.">
    <meta property="og:image" content="https://mocapwork.com/og-image.jpg">
    <meta property="og:site_name" content="MocapWork">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mocapwork.com/">
    <meta property="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta property="twitter:description" content="Professional mocap animations for Unreal Engine, Unity, Blender. Studio-quality, exclusive rights, instant download.">
    <meta property="twitter:image" content="https://mocapwork.com/og-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mocapwork.com/">
    
    <!-- Favicon - Add custom MW favicon files here -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"> -->
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3MFZSKB0V4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3MFZSKB0V4');
    </script>
    <meta name="description" content="Buy professional motion capture animations for games, film, and virtual production. High-quality mocap library ready for Unreal Engine, Unity, Blender, and more. From $1 with instant download.">
    <meta name="keywords" content="buy motion capture, mocap animations, purchase animations, game development, Unreal Engine, Unity, Blender, 3D animation, motion capture library, professional mocap">
    <meta name="author" content="MocapWork">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://goldstargamingtv-droid.github.io/mocap/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta property="og:title" content="MocapWork - Premium Motion Capture Animation Library">
    <meta property="og:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more. Browse our library of high-quality mocap animations.">
    <meta property="og:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="MocapWork">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://goldstargamingtv-droid.github.io/mocap/">
    <meta name="twitter:title" content="MocapWork - Premium Motion Capture Animations">
    <meta name="twitter:description" content="Professional motion capture animations from $1. Instant download for Unreal Engine, Unity, Blender, and more.">
    <meta name="twitter:image" content="https://goldstargamingtv-droid.github.io/mocap/og-image.jpg">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#0F0F1A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Performance: Resource Hints -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://js.stripe.com">
    <link rel="dns-prefetch" href="https://api.stripe.com">
    <link rel="preconnect" href="https://ekzablbemepokrcitvco.supabase.co">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        :root {
            --bg-primary: #000000;
            --bg-secondary: #0F0F0F;
            --bg-card: #1A1A1A;
            --teal: #F59E0B;
            --teal-dark: #D97706;
            --amber: #FF6B6B;
            --amber-light: #FF8E8E;
            --coral: #FFA07A;
            --coral-light: #FFB894;
            --text-primary: #FEFCE8;
            --text-secondary: #E7E5D3;
            --text-muted: #A8A593;
        }

        /* Accessibility: Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--teal);
            color: var(--bg-primary);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            z-index: 100000;
            border-radius: 0 0 8px 0;
        }
        
        .skip-link:focus {
            top: 0;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            background-image: radial-gradient(circle at 30% 20%, rgba(0, 212, 255, 0.12), transparent 50%),
                              radial-gradient(circle at 70% 80%, rgba(245, 158, 11, 0.12), transparent 50%);
            background-attachment: fixed;
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Custom Scrollbar - Grey with Orange Accent */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 6px;
            border: 2px solid #1a1a1a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #FBBF24 0%, #FF8E8E 100%);
        }

        /* Firefox Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #F59E0B #1a1a1a;
        }

        .font-sora {
            font-family: 'Sora', sans-serif;
        }

        /* Smooth grain overlay */
        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.025;
            z-index: 100;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .animated-gradient {
            background: linear-gradient(90deg, var(--teal), var(--amber), var(--teal));
            background-size: 200% auto;
            animation: gradientShift 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .glow-coral {
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
        }

        /* Button Styles */
        .btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            font-family: 'Sora', sans-serif;
        }

        .btn-primary {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            border-radius: 50px;
            font-weight: 600;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .btn-secondary {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
            text-decoration: none;
        }

        .btn-secondary:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10002;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
        }

        .navbar.scrolled {
            background: rgba(15, 15, 15, 0.92);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(100, 116, 139, 0.15);
        }

        .navbar-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            align-items: center;
            gap: 24px;
            height: 70px;
        }

        .nav-center {
            display: flex;
            gap: 24px;
            align-items: center;
            margin-left: 16px;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
            white-space: nowrap;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--teal);
            transition: width 0.3s ease;
        }

        .nav-link:hover {
            color: var(--text-primary);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Navbar Search */
        .nav-search {
            flex: 1;
            position: relative;
            margin-left: 24px;
            margin-right: 24px;
        }

        .search-input-nav {
            width: 100%;
            padding: 10px 40px 10px 40px;
            background: rgba(26, 26, 26, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input-nav:focus {
            outline: none;
            border-color: var(--teal);
            background: rgba(26, 26, 26, 0.8);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .search-input-nav::placeholder {
            color: var(--text-muted);
        }

        .search-icon-nav {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            opacity: 0.6;
        }

        .search-clear-nav {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            display: none;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear-nav:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown-nav {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .search-dropdown-nav.active {
            display: block;
        }

        .search-dropdown-library {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 10000;
        }

        .nav-right {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-left: auto;
        }

        .cart-container {
            position: relative;
            display: inline-block;
        }

        .cart-icon {
            position: relative !important;
            cursor: pointer;
            padding: 8px;
            display: inline-flex !important;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            isolation: isolate;
        }

        .cart-icon:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }

        .cart-icon svg {
            width: 24px;
            height: 24px;
            stroke: var(--teal);
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .cart-badge {
            position: absolute !important;
            top: -4px !important;
            right: -4px !important;
            background: var(--amber);
            color: #000000;
            min-width: 20px;
            height: 20px;
            padding: 0 5px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            z-index: 10;
        }

        /* Cart Hover Dropdown */
        .cart-hover-dropdown {
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            max-height: 500px;
            background: #1a1a1a;
            border: 1px solid rgba(100, 116, 139, 0.2);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            display: none;
            z-index: 10003;
            overflow: hidden;
            isolation: isolate;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }

        .cart-hover-dropdown::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: #0f0f0f;
            border-radius: 12px;
            z-index: -2;
            opacity: 1;
        }

        .cart-hover-dropdown::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1a1a1a;
            border-radius: 12px;
            z-index: -1;
            opacity: 1;
        }


        .cart-hover-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(100, 116, 139, 0.1);
            font-weight: 700;
            font-size: 16px;
            color: var(--text-primary);
            background: #1a1a1a;
        }

        .cart-hover-items {
            max-height: 320px;
            overflow-y: auto;
            background: #1a1a1a;
        }

        .cart-hover-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-hover-items::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 3px;
        }

        .cart-hover-items::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F59E0B 0%, #FF6B6B 100%);
            border-radius: 3px;
        }

        .cart-hover-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            background: #1a1a1a;
            margin: 8px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .cart-hover-item:hover {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .cart-hover-item-img {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .cart-hover-item-info {
            flex: 1;
            min-width: 0;
        }

        .cart-hover-item-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .cart-hover-item-price {
            font-size: 12px;
            color: #FFFFFF;
            font-weight: 600;
        }

        .cart-hover-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cart-hover-item-remove {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .cart-hover-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }

        .cart-hover-empty {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
        }

        .cart-hover-empty-icon {
            font-size: 48px;
            opacity: 0.3;
            margin-bottom: 12px;
        }

        .cart-hover-footer {
            padding: 16px 20px;
            border-top: 1px solid rgba(100, 116, 139, 0.1);
            background: #0f0f0f;
        }

        .cart-hover-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .cart-hover-total span:last-child {
            color: #FFFFFF;
            font-size: 18px;
        }
        
        .cart-hover-total .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-logout-nav {
            padding: 8px 16px;
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #FCA5A5;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-logout-nav:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 60%;
            background: var(--bg-primary);
            border-radius: 6px;
            animation: pulse 3s ease-in-out infinite;
        }

        .logo-text {
            font-size: 26px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--text-primary);
        }

        .logo-text span {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: none; /* Hidden on desktop - mobile only */
            gap: 40px;
            list-style: none;
            align-items: center;
        }
        
        .mobile-menu-close {
            display: none; /* Only visible on mobile */
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--teal);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        
        .btn-login {
            padding: 10px 28px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 50px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--teal) !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 15px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .btn-login:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Admin Dashboard Button */
        .btn-admin {
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(0, 212, 255, 0.15));
            border-radius: 10px;
            border: 2px solid rgba(245, 158, 11, 0.5);
            color: var(--amber) !important;
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Sora', sans-serif;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            margin-right: 12px;
        }
        
        .btn-admin:hover {
            background: linear-gradient(135deg, var(--amber), var(--teal));
            color: #000 !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .hamburger-menu {
            display: none;
            background: none;
            border: none;
            color: var(--cream);
            font-size: 24px;
            cursor: pointer;
        }

        /* Force hide on desktop */
        @media (min-width: 769px) {
            .hamburger-menu {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
            }
        }

        /* Advanced Search Bar */
        .search-container {
            position: sticky;
            top: 70px;
            z-index: 999;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
            padding: 16px 0;
            transition: all 0.3s ease;
        }

        .search-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            position: relative;
        }

        .search-box {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 56px 16px 56px;
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 20px;
        }

        .search-clear {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            display: none;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .search-clear:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            max-height: 500px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .search-dropdown.active {
            display: block;
        }

        .search-section {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .search-section:last-child {
            border-bottom: none;
        }

        .search-section-title {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .search-result-item {
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 4px;
        }

        .search-result-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .search-result-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .search-result-text {
            flex: 1;
            color: var(--text-primary);
        }

        .search-result-text strong {
            color: var(--teal);
        }

        .search-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .search-tag {
            padding: 6px 12px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-tag:hover {
            background: rgba(0, 212, 255, 0.2);
            color: var(--teal);
        }

        .search-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-filter-btn:hover,
        .search-filter-btn.active {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--teal);
            color: var(--teal);
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: 90px;
            overflow: hidden;
        }

        /* Floating Particles */
        .particle {
            position: absolute;
            bottom: 0;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.8), transparent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
            animation: float-up linear infinite;
            opacity: 0;
            will-change: transform, opacity;
        }

        @keyframes float-up {
            0% {
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            3% {
                opacity: 0.6;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            97% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }

        .hero-background {
            position: absolute;
            inset: 0;
            overflow: hidden;
        }

        /* Static Background Image */
        .hero-static-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
            z-index: 1;
            opacity: 0.25;
            background-image: url('hero-background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            /* Fade out at bottom for seamless transition - same as video */
            -webkit-mask-image: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
                rgba(0,0,0,0.7) 60%, 
                rgba(0,0,0,0.3) 75%,
                rgba(0,0,0,0.1) 85%,
                rgba(0,0,0,0) 92%);
            mask-image: linear-gradient(to bottom, 
                rgba(0,0,0,1) 0%, 
                rgba(0,0,0,1) 40%, 
                rgba(0,0,0,0.7) 60%, 
                rgba(0,0,0,0.3) 75%,
                rgba(0,0,0,0.1) 85%,
                rgba(0,0,0,0) 92%);
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            animation: float 8s ease-in-out infinite;
        }

        .shape-1 {
            top: 20%;
            left: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.15), transparent);
        }

        .shape-2 {
            bottom: 20%;
            right: 15%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(255, 107, 107, 0.12), transparent);
            animation-delay: 4s;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 32px;
            max-width: 1200px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            background: rgba(0, 212, 255, 0.08);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 50px;
            color: var(--teal);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
            backdrop-filter: blur(10px);
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            background: var(--teal);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .hero-title {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 800;
            line-height: 1.05;
            margin-bottom: 12px;
            letter-spacing: -2px;
            font-family: 'Sora', sans-serif;
            color: #000000;
            text-shadow: 0 0 40px rgba(245, 158, 11, 0.3),
                         0 0 80px rgba(245, 158, 11, 0.1);
        }

        .hero-subtitle {
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            color: var(--text-secondary);
            margin-bottom: 16px;
            max-width: 650px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        /* Hero subtitle color styles */
        .hero-subtitle-buy-gradient {
            background: linear-gradient(135deg, #F59E0B, #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .hero-subtitle-secondary {
            color: #FEFCE8;
            font-weight: 400;
        }

        .hero-subtitle-professional-glow {
            color: #FBBF24;
            font-weight: 800; /* Increased from 700 */
            font-size: 1.15em; /* Slightly larger than surrounding text */
            text-shadow: 0 0 15px rgba(251, 191, 36, 0.6),
                         0 0 30px rgba(251, 191, 36, 0.4),
                         0 0 45px rgba(251, 191, 36, 0.2);
        }

        .hero-subtitle-platforms-gradient {
            background: linear-gradient(135deg, #FF6B6B, #F59E0B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .hero-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn-primary-cta {
            position: relative;
            overflow: hidden;
        }

        .button-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .trust-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(100, 116, 139, 0.1);
            border: 1px solid rgba(100, 116, 139, 0.2);
            border-radius: 50px;
            font-size: 12px;
            color: var(--teal);
            margin-top: 12px;
            margin-bottom: 12px;
            backdrop-filter: blur(10px);
        }

        .trust-badge svg {
            fill: var(--teal);
        }

        .hero-buttons .btn-secondary {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .hero-buttons .btn-secondary:hover {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: scale(1.05);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        .hero-stats {
            display: flex;
            gap: 36px;
            justify-content: center;
            font-size: 12px;
            color: var(--text-muted);
            flex-wrap: wrap;
        }

        /* Hero Preview Carousel - 3 GIFs with Center Focus */
        .hero-preview-carousel {
            margin-bottom: 20px;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            padding: 0 20px;
        }

        .carousel-container {
            position: relative;
            height: 220px;
            width: 100%;
            perspective: 1200px;
        }

        .carousel-item {
            position: absolute;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),
                        opacity 1.2s ease-out,
                        left 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid rgba(100, 116, 139, 0.4);
            background: #1a1a1a;
            will-change: transform, opacity;
            top: 50%;
        }

        /* Position classes for smooth transitions */
        .carousel-item.pos-far-left {
            left: 5%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-left {
            left: 27%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-center {
            left: 50%;
            width: 240px;
            height: 180px;
            opacity: 1;
            transform: translateX(-50%) translateY(-50%) scale(1) translateZ(0);
            z-index: 10;
            box-shadow: 0 12px 35px rgba(0, 212, 255, 0.12),
                        0 0 20px rgba(0, 212, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.45);
        }

        .carousel-item.pos-right {
            left: 73%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        .carousel-item.pos-far-right {
            left: 95%;
            width: 140px;
            height: 170px;
            opacity: 0.4;
            transform: translateX(-50%) translateY(-50%) scale(0.8) translateZ(-150px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }

        /* Hover states */
        .carousel-item.side:hover {
            opacity: 0.65;
            transform: translateX(-50%) translateY(-50%) scale(0.85) translateZ(-150px);
        }

        .carousel-item.pos-center:hover {
            transform: translateX(-50%) translateY(-50%) scale(1) translateZ(0);
        }

        /* Legacy classes for backwards compatibility */
        .carousel-item.side {
            width: 140px;
            height: 170px;
            opacity: 0.4;
        }

        .carousel-item.center {
            width: 240px;
            height: 180px;
            opacity: 1;
        }

        .carousel-item-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
        }

        .carousel-placeholder {
            text-align: center;
            padding: 20px 12px;
        }

        .carousel-placeholder-icon {
            font-size: 28px;
            margin-bottom: 8px;
            opacity: 0.5;
        }

        .carousel-placeholder-text {
            font-size: 12px;
            font-weight: 600;
            color: var(--teal);
            margin-bottom: 3px;
        }

        .carousel-placeholder-subtext {
            font-size: 9px;
            color: var(--text-muted);
        }

        /* Carousel Overlay Label */
        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.9) 100%);
            padding: 10px;
            text-align: center;
        }

        .carousel-overlay-text {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Navigation Dots */
        .carousel-dots {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 12px;
        }

        .carousel-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: rgba(245, 158, 11, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1.5px solid rgba(0, 212, 255, 0.5);
        }

        .carousel-dot.active {
            background: rgba(245, 158, 11, 1);
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            transform: scale(1.3);
            border-color: rgba(0, 212, 255, 0.8);
        }

        .carousel-dot:hover {
            background: rgba(245, 158, 11, 0.6);
            border-color: rgba(0, 212, 255, 0.7);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .carousel-container {
                height: 140px;
            }

            .carousel-item.side {
                width: 70px;
                height: 100px;
            }

            .carousel-item.center {
                width: 120px;
                height: 140px;
            }

            .carousel-placeholder-icon {
                font-size: 20px;
            }

            .carousel-placeholder-text {
                font-size: 10px;
            }

            .carousel-placeholder-subtext {
                font-size: 8px;
            }

            .carousel-overlay-text {
                font-size: 8px;
            }
            
            /* Mobile Touch Optimizations */
            .hero-buttons {
                width: 100%;
                padding: 0 20px;
            }
            
            .hero-buttons .btn-secondary {
                min-height: 48px; /* Better tap target */
                width: 100%;
                max-width: 300px;
            }
            
            .trust-badge {
                font-size: 11px;
                padding: 10px 16px;
                flex-wrap: wrap;
                text-align: center;
                justify-content: center;
            }
            
            .trust-badge span:last-child {
                width: 100%;
                margin-top: 4px;
                font-size: 10px;
            }
            
            .hero-stats {
                gap: 32px;
                font-size: 12px;
            }
            
            .stat-icon svg {
                width: 16px;
                height: 16px;
            }
        }

        .platform-logos {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
            margin: 16px 0;
            opacity: 0.8;
        }

        .platform-logo {
            height: 48px;
            width: auto;
            opacity: 1;
            filter: brightness(0) invert(1);
            transition: all 0.3s ease;
        }

        .platform-logo:first-child {
            height: 70px;
        }

        .platform-logo:hover {
            filter: brightness(1) invert(0) drop-shadow(0 0 20px rgba(245, 158, 11, 0.8));
            transform: translateY(-4px);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-icon svg {
            width: 16px;
            height: 16px;
            fill: var(--teal);
            filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.6));
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% {
                filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.6));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.8));
                transform: scale(1.05);
            }
        }

        .stat-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .scroll-indicator {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
            opacity: 0.6;
        }

        /* Library Section */
        .library-section {
            padding: 120px 32px;
            position: relative;
            overflow: visible;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .section-title {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 20px;
            letter-spacing: -1px;
            font-family: 'Sora', sans-serif;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        /* Filters */
        .filters-card {
            position: relative;
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.1);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 60px;
            z-index: 100;
        }

        .search-box {
            position: relative;
            margin-bottom: 28px;
            z-index: 10001;
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .search-input {
            width: 100%;
            background: rgba(26, 26, 26, 0.5);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 14px;
            padding: 18px 20px 18px 56px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-input:focus {
            border-color: var(--teal);
            background: rgba(26, 26, 26, 0.7);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.15);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .filter-group label {
            display: block;
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-select {
            width: 100%;
            background: rgba(26, 26, 26, 0.5);
            border: 2px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            padding: 14px 16px;
            color: var(--text-primary);
            font-size: 15px;
            outline: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .filter-select option {
            background: var(--bg-card);
            color: var(--text-primary);
            padding: 12px;
            border-radius: 8px;
        }

        .filter-select option:hover {
            background: rgba(0, 212, 255, 0.2);
        }

        .filter-select option:checked {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            color: white;
        }

        .filter-select:hover,
        .filter-select:focus {
            border-color: var(--teal);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.1);
        }

        .results-count {
            margin-top: 20px;
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 500;
        }

        /* Animation Grid */
        .animation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 28px;
        }

        .animation-card {
            position: relative;
            background: var(--bg-card);
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0, 212, 255, 0.08);
        }

        .animation-card:hover {
            transform: translateY(-12px);
            border-color: var(--teal);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(0, 212, 255, 0.25),
                        0 0 20px rgba(245, 158, 11, 0.15);
        }
        
        .feature-card:hover {
            transform: translateY(-12px);
            border-color: var(--teal);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.6), 
                        0 0 40px rgba(0, 212, 255, 0.25),
                        0 0 20px rgba(245, 158, 11, 0.15);
        }
        
        .card-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 10;
        }
        
        .card-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .card-checkbox label {
            display: block;
            width: 28px;
            height: 28px;
            border: 2px solid var(--teal);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .card-checkbox label:hover {
            transform: scale(1.1);
            border-color: var(--amber);
        }
        
        .card-checkbox input[type="checkbox"]:checked + label {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border-color: var(--teal);
        }
        
        .card-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 16px;
            font-weight: bold;
        }

        .card-thumbnail {
            position: relative;
            aspect-ratio: 4/3;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(245, 158, 11, 0.08));
        }

        .card-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animation-card:hover .card-thumbnail img {
            transform: scale(1.1);
        }

        /* Icon badges - below GIF, above title */
        .icon-badge {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: help;
        }
        
        .icon-badge:hover {
            transform: scale(1.1);
        }
        
        .icon-badge-popular {
            background: rgba(245, 158, 11, 0.15);
            color: var(--amber);
            border: 2px solid rgba(245, 158, 11, 0.4);
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
        }
        
        .icon-badge-sale {
            background: rgba(34, 197, 94, 0.15);
            color: #10B981;
            border: 2px solid rgba(34, 197, 94, 0.4);
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.2);
        }
        
        .icon-badge-holiday {
            background: rgba(239, 68, 68, 0.15);
            color: #EF4444;
            border: 2px solid rgba(239, 68, 68, 0.4);
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: rgba(20, 20, 20, 0.75);
            backdrop-filter: blur(6px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .animation-card:hover .card-overlay {
            opacity: 1;
        }

        .quick-preview-btn {
            padding: 12px 28px;
            background: rgba(0, 212, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid var(--teal);
            border-radius: 8px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .quick-preview-btn:hover {
            background: rgba(0, 212, 255, 0.35);
            border-color: var(--amber);
            transform: scale(1.05);
        }

        .card-content {
            padding: 24px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 14px;
            transition: color 0.3s ease;
            font-family: 'Sora', sans-serif;
            color: var(--text-primary);
        }

        .animation-card:hover .card-title {
            color: var(--amber);
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .card-badges {
            min-height: 60px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 8px;
            align-content: flex-start;
        }

        .tag {
            padding: 5px 12px;
            background: rgba(0, 212, 255, 0.08);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 16px;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
        }

        .card-duration {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .card-price {
            /* Styling moved to inline - see renderAnimations() */
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: 'Sora', sans-serif;
            font-size: 15px;
        }

        .add-to-cart-btn:hover {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: translateY(-2px);
        }

        .load-more {
            text-align: center;
            margin-top: 60px;
        }

        /* Footer */
        /* Custom Request Section */
        .custom-request-section {
            background: linear-gradient(180deg, var(--bg-primary) 0%, rgba(26, 26, 26, 0.6) 100%);
            padding: 100px 32px;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
        }

        .request-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .request-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .request-subtitle {
            color: var(--text-secondary);
            font-size: 18px;
            margin-top: 16px;
            line-height: 1.6;
        }

        .request-form {
            background: rgba(26, 26, 26, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            padding: 14px 18px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid var(--teal);
            border-radius: 12px;
            color: #FFFFFF;
            font-weight: 800;
            font-size: 16px;
            font-family: 'Sora', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.4);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(0, 212, 255, 0.4);
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .request-form {
                padding: 32px 24px;
            }
        }

        .footer {
            background: #0a0a0a;
            border-top: 1px solid rgba(100, 116, 139, 0.15);
            padding: 60px 32px 32px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 48px;
            max-width: 1400px;
            margin: 0 auto 48px;
        }

        .footer-brand {
            grid-column: span 2;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .footer-description {
            color: var(--text-secondary);
            margin-bottom: 28px;
            max-width: 400px;
            line-height: 1.7;
        }

        .social-links {
            display: flex;
            gap: 12px;
        }

        .social-link {
            width: 44px;
            height: 44px;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .footer-section h4 {
            color: var(--text-primary);
            margin-bottom: 20px;
            font-weight: 700;
            font-family: 'Sora', sans-serif;
            font-size: 16px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .footer-links a:hover {
            color: var(--teal);
            padding-left: 4px;
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 32px;
            border-top: 1px solid rgba(0, 212, 255, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .copyright {
            color: var(--text-muted);
            font-size: 14px;
        }

        .legal-links {
            display: flex;
            gap: 28px;
            font-size: 14px;
        }

        .legal-links a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .legal-links a:hover {
            color: var(--teal);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0);
            }
            33% {
                transform: translate(30px, -30px);
            }
            66% {
                transform: translate(-20px, 20px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(0.95);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-12px);
            }
        }

        /* Sticky Browse Library Button */
        .sticky-browse-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            padding: 12px 24px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Sora', sans-serif;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            opacity: 0;
            visibility: hidden;
            transform: translateY(100px);
            transition: all 0.3s ease;
        }

        .sticky-browse-btn.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .sticky-browse-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.6);
        }
        
        /* Mobile Sticky CTA */
        .mobile-sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.98) 100%);
            backdrop-filter: blur(20px);
            padding: 12px 20px;
            border-top: 2px solid rgba(245, 158, 11, 0.3);
            display: none;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.4s ease;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-sticky-cta.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .mobile-sticky-cta-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .mobile-sticky-cta-text {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .mobile-sticky-cta-text small {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 400;
        }
        
        .mobile-sticky-cta-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            border: none;
            border-radius: 50px;
            color: #000;
            font-weight: 700;
            font-size: 13px;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Responsive */
        @media (max-width: 768px) {
            /* Hide desktop nav elements */
            .nav-center {
                display: none;
            }
            
            .nav-search {
                display: none;
            }
            
            .btn-login {
                display: none;
            }

            /* Keep cart and user menu visible on mobile */
            .nav-right {
                display: flex;
                gap: 8px;
            }

            /* Show mobile menu button */
            .hamburger-menu {
                display: block !important;
                background: none !important;
                border: none !important;
                color: var(--teal) !important;
                font-size: 28px;
                cursor: pointer;
                padding: 8px;
                outline: none !important;
                box-shadow: none !important;
                z-index: 1000 !important;
                position: relative !important;
            }
            
            .hamburger-menu:focus {
                outline: none !important;
                box-shadow: none !important;
            }
            
            /* Tighter navbar on mobile */
            .navbar-container {
                gap: 12px;
            }
            
            /* Mobile menu overlay */
            .nav-links {
                display: flex; /* Show on mobile */
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                background: rgba(15, 15, 15, 0.98);
                backdrop-filter: blur(20px);
                flex-direction: column;
                gap: 0;
                padding: 80px 0 20px;
                border-left: 1px solid rgba(100, 116, 139, 0.15);
                transition: right 0.3s ease;
                z-index: 9999;
                overflow-y: auto;
            }
            
            .mobile-menu-close {
                display: flex; /* Show on mobile */
            }
            
            .nav-links.active {
                right: 0;
            }
            
            /* Mobile menu items */
            .nav-links li {
                width: 100%;
                text-align: left;
                padding: 0;
                border-bottom: 1px solid rgba(0, 212, 255, 0.05);
            }
            
            .nav-links li a {
                display: block;
                padding: 20px 32px;
                font-size: 16px;
                font-weight: 600;
            }
            
            .nav-links li:last-child {
                border-bottom: none;
            }
            
            /* Mobile menu close button */
            .mobile-menu-close {
                position: absolute;
                top: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
                background: rgba(0, 212, 255, 0.1);
                border: none;
                border-radius: 8px;
                color: var(--text-primary);
                font-size: 24px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Keep cart icon and user menu visible on mobile */
            .nav-actions {
                display: flex;
                gap: 12px;
                align-items: center;
            }
            
            .cart-icon {
                display: flex !important;
            }
            
            #userMenu {
                display: none !important;
            }
            
            #userMenu.active {
                display: flex !important;
                flex-direction: column;
                position: fixed;
                top: 80px;
                right: 20px;
                background: var(--bg-secondary);
                border: 1px solid rgba(0, 212, 255, 0.2);
                border-radius: 12px;
                padding: 16px;
                gap: 12px;
                z-index: 9998;
            }
            
            #userMenu a {
                white-space: nowrap;
            }

            .hero-stats {
                gap: 32px;
            }

            .footer-brand {
                grid-column: span 1;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .animation-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .navbar-container {
                padding: 0 20px;
            }

            .library-section {
                padding: 80px 20px;
            }

            .filters-card {
                padding: 24px;
            }
            
            .hero h1 {
                font-size: 40px;
            }
            
            .hero-description {
                font-size: 16px;
            }
            
            .hero-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .hero-buttons .btn {
                width: 100%;
            }
            
            /* Auth modal mobile optimization */
            .auth-modal-box {
                width: 95%;
                max-width: 100%;
            }
            
            .auth-close {
                display: flex; /* Show X button on mobile */
            }
            
            .auth-form {
                padding: 32px 24px;
            }
            
            .auth-modal-content {
                padding: 32px 24px;
            }
            
            /* Cart modal mobile */
            .cart-modal-content {
                width: 100%;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }

            .animation-grid {
                grid-template-columns: 1fr;
            }
        }

        /* SVG Icons */
        /* Cart Modal */
        /* Auth Required Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .auth-modal.active {
            display: flex;
        }
        
        .auth-modal-overlay {
            position: absolute;
            inset: 0;
        }
        
        .auth-modal-content {
            background: var(--bg-secondary);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 48px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: modalSlideIn 0.3s ease;
            position: relative;
            z-index: 1;
        }
        
        .auth-modal-box {
            background: var(--bg-secondary);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 0;
            max-width: 480px;
            width: 90%;
            animation: modalSlideIn 0.3s ease;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .auth-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            border: none;
            background: rgba(239, 68, 68, 0.2);
            color: #FCA5A5;
            font-size: 24px;
            font-weight: bold;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            display: none; /* Hidden on desktop */
            align-items: center;
            justify-content: center;
        }
        
        .auth-close:hover {
            background: rgba(239, 68, 68, 0.3);
            transform: scale(1.1);
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid rgba(0, 212, 255, 0.15);
        }
        
        .auth-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .auth-tab.active {
            color: var(--text-primary);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .auth-form {
            padding: 40px;
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 28px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .password-input-wrapper {
            position: relative;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }
        
        .password-input-wrapper input {
            padding-right: 45px; /* Make room for eye icon */
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        
        .password-toggle:hover {
            color: var(--teal);
        }
        
        .eye-icon {
            width: 20px;
            height: 20px;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }
        
        .auth-form .btn {
            width: 100%;
            margin-top: 8px;
        }
        
        .auth-message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .auth-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #FCA5A5;
        }
        
        .auth-message.success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #86EFAC;
        }
        
        .auth-modal-icon {
            font-size: 64px;
            margin-bottom: 24px;
        }
        
        .auth-modal h2 {
            font-size: 28px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .auth-modal p {
            color: var(--text-secondary);
            margin-bottom: 32px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .auth-modal-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
        }
        
        .auth-modal-buttons .btn {
            padding: 14px 32px;
            font-size: 15px;
            border-radius: 50px;
        }
        
        .auth-modal-buttons .btn-secondary {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--teal);
        }
        
        .auth-modal-buttons .btn-secondary:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .cart-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: flex-end;
        }
        
        .cart-modal.active {
            display: flex;
        }
        
        .cart-modal-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }
        
        .cart-modal-content {
            position: relative;
            width: 500px;
            max-width: 90vw;
            height: 100vh;
            background: var(--bg-secondary);
            border-left: 1px solid rgba(100, 116, 139, 0.2);
            display: flex;
            flex-direction: column;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .cart-header {
            padding: 24px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-header h2 {
            font-size: 24px;
            font-weight: 800;
            font-family: 'Sora', sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .cart-close {
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(0, 212, 255, 0.1);
            color: var(--text-primary);
            font-size: 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-close:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .cart-item {
            background: rgba(26, 26, 26, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            gap: 16px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .cart-item:hover {
            border-color: var(--teal);
        }
        
        .cart-item-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
        }
        
        .cart-item-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .cart-item-checkbox label {
            display: block;
            width: 24px;
            height: 24px;
            border: 2px solid var(--teal);
            border-radius: 4px;
            background: rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label {
            background: linear-gradient(135deg, var(--teal), var(--amber));
        }
        
        .cart-item-checkbox input[type="checkbox"]:checked + label::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .cart-item-title {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 15px;
        }
        
        .cart-item-duration {
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .cart-item-price {
            font-size: 18px;
            font-weight: 800;
            color: #FFFFFF;
        }
        
        .cart-item-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .cart-item-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .cart-item-remove:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }
        
        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        
        .cart-empty svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .cart-footer {
            padding: 24px;
            border-top: 1px solid rgba(0, 212, 255, 0.15);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            font-size: 18px;
            font-weight: 700;
        }
        
        .cart-total-price {
            font-size: 28px;
            font-weight: 900;
            color: #FFFFFF;
            font-family: 'Sora', sans-serif;
        }
        
        .cart-total-price .price-dollar {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .icon {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Pricing Banner */
        .pricing-banner {
            background: linear-gradient(135deg, var(--teal), var(--amber));
            padding: 16px 24px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            color: #000000;
            margin-bottom: 60px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.3);
        }

        .pricing-banner span {
            font-size: 24px;
            margin: 0 8px;
            color: #000000;
        }

        /* Sale Badge */
        /* Buy Now Button */
        .buy-now-btn {
            width: 100%;
            margin-top: 20px;
            padding: 16px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.5);
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .buy-now-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10B981;
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.7),
                        0 0 60px rgba(16, 185, 129, 0.4);
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: 12px;
            padding: 14px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: var(--teal);
            font-weight: 600;
            cursor: pointer;
            font-family: "Sora", sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-to-cart-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--teal);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .card-price {
            font-size: 28px !important;
            font-weight: 800 !important;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 24px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
        }

        .modal-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            overflow: hidden;
            border-radius: 24px 24px 0 0;
        }

        .modal-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 32px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 16px;
            font-family: "Sora", sans-serif;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-description {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 16px;
            line-height: 1.8;
        }

        .modal-price {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--teal), var(--amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: "Sora", sans-serif;
            margin-bottom: 24px;
        }

        .hidden {
            display: none;
        }
    </style>
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MocapWork",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "description": "Professional motion capture animation marketplace for game developers, filmmakers, and 3D artists",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://goldstargamingtv-droid.github.io/mocap/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "MocapWork",
      "description": "Buy professional motion capture animations for Unreal Engine, Unity, Blender, and more",
      "url": "https://goldstargamingtv-droid.github.io/mocap/",
      "priceRange": "Starting at $1",
      "paymentAccepted": "Credit Card, Stripe",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "US"
      }
    }
    </script>
</head>
<body>
    <!-- Loading Progress Bar -->
    <div id="loadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, var(--teal), var(--amber)); z-index: 99999; transition: width 0.3s ease;"></div>
    
    <!-- Loading Progress Bar for Auth -->
    <div id="authLoadingBar" style="position: fixed; top: 0; left: 0; width: 0; height: 3px; background: linear-gradient(90deg, #00D4FF, #F59E0B); z-index: 99999; transition: width 0.3s ease; display: none;"></div>
    
    <!-- Start loading bar immediately -->
    <script>
        // Start the loading bar as soon as this script runs (before page fully loads)
        const loadingBar = document.getElementById('loadingBar');
        
        // Immediately start at 10%
        loadingBar.style.width = '10%';
        
        // Progress to 30% over next 200ms
        setTimeout(() => {
            loadingBar.style.width = '30%';
        }, 200);
        
        // Slowly creep to 50% while waiting for page to load
        setTimeout(() => {
            loadingBar.style.width = '50%';
        }, 600);
    </script>
    
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Grain Overlay -->
    <div class="grain"></div>

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <div class="navbar-container">
            <!-- Logo -->
            <a href="#" class="logo">
                <div class="logo-icon"></div>
                <span class="logo-text font-sora">
                    Mocap<span>Work</span>
                </span>
            </a>

            <!-- Main Nav Links -->
            <div class="nav-center">
                <a href="#library" class="nav-link">Animations</a>
                <a href="#" onclick="handleDashboardClick(event); return false;" class="nav-link">My Library</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="#faq" class="nav-link">FAQ</a>
            </div>

            <!-- Search Bar -->
            <div class="nav-search">
                <span class="search-icon-nav"></span>
                <input 
                    type="text" 
                    class="search-input-nav" 
                    id="searchInputNav" 
                    placeholder="Search animations..."
                    autocomplete="off"
                >
                <button class="search-clear-nav" id="searchClearNav" onclick="clearSearchNav()"></button>
                
                <div class="search-dropdown-nav" id="searchDropdownNav">
                    <!-- Results populated here -->
                </div>
            </div>

            <!-- Right Side Actions -->
            <div class="nav-right">
                <!-- Admin Dashboard Button (only for admins) -->
                <a href="admin-dashboard.html" id="adminDashboardBtn" class="btn-admin" style="display: none;" title="Admin Dashboard">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 6px;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Admin
                </a>
                <div id="authLinks">
                    <a href="#" onclick="showAuthModal('login'); return false;" class="btn-login">Sign In</a>
                </div>
                <div id="userMenu" style="display: none;">
                    <button onclick="logout()" class="btn-logout-nav">Sign Out</button>
                </div>
                <div class="cart-container">
                    <div class="cart-icon" id="cartIconNav" onclick="openCart()" title="View Cart" role="button" aria-label="Shopping cart with 0 items" tabindex="0">
                        <svg viewBox="0 0 24 24">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="cart-badge">0</span>
                    </div>
                </div>
            </div>

            <!-- Mobile Menu -->
            <button class="hamburger-menu" aria-label="Toggle navigation menu" aria-expanded="false"></button>
            
            <ul class="nav-links">
                <button class="mobile-menu-close" onclick="toggleMobileMenu()"></button>
                
                <!-- Mobile Search -->
                <li style="padding: 20px; border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                    <div style="position: relative;" id="mobileSearchWrapper">
                        <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: 0.6;"></span>
                        <input 
                            type="text" 
                            id="mobileSearch"
                            placeholder="Search animations..."
                            style="width: 100%; padding: 10px 10px 10px 40px; background: rgba(26, 26, 26, 0.6); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 20px; color: white; font-family: 'DM Sans', sans-serif; font-size: 14px;"
                        >
                        <div class="search-dropdown-mobile" id="searchDropdownMobile" style="display: none; position: absolute; top: calc(100% + 8px); left: 0; right: 0; background: var(--bg-secondary); border: 2px solid rgba(100, 116, 139, 0.3); border-radius: 12px; max-height: 300px; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); z-index: 10000;">
                            <!-- Results populated here -->
                        </div>
                    </div>
                </li>
                
                <li><a href="#library" onclick="toggleMobileMenu()">Animations</a></li>
                <li><a href="#" onclick="handleDashboardClick(event); toggleMobileMenu()">My Library</a></li>
                <li><a href="#contact" onclick="toggleMobileMenu()">Contact</a></li>
                <li><a href="#faq" onclick="toggleMobileMenu()">FAQ</a></li>
                <li id="mobileAuthLink"><a href="#" onclick="showAuthModal('login'); toggleMobileMenu(); return false;">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <!-- Sticky Browse Library Button -->
    <a href="#library" class="sticky-browse-btn" id="stickyBrowseBtn">
         Browse Library
    </a>

    <!-- Auth Modal (Login/Signup) -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthModal()"></div>
        <div class="auth-modal-box">
            <button class="auth-close" onclick="closeAuthModal()"></button>
            
            <!-- Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
                <button class="auth-tab" onclick="switchAuthTab('signup')">Create Account</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <h2>Welcome Back</h2>
                <p class="auth-subtitle">Sign in to access your motion capture library</p>
                
                <div id="loginMessage"></div>
                
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="loginPassword" placeholder="" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword', this)" aria-label="Toggle password visibility">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="loginBtn">Sign In</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="auth-form">
                <h2>Create Account</h2>
                <p class="auth-subtitle">Join MocapWork to access premium animations</p>
                
                <div id="signupMessage"></div>
                
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" placeholder="you@example.com" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signupConfirmPassword">Confirm Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="signupConfirmPassword" placeholder="" minlength="6" required aria-required="true">
                            <button type="button" class="password-toggle" onclick="togglePassword('signupConfirmPassword', this)">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" id="signupBtn">Create Account</button>
                </form>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="closeAuthModal(); return false;" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Required Modal (Keep for My Library click) -->
    <div id="authRequiredModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeAuthRequiredModal()"></div>
        <div class="auth-modal-content">
            <div class="auth-modal-icon"></div>
            <h2>Sign In Required</h2>
            <p>Please sign in or create an account to start collecting animations and view your library.</p>
            <div class="auth-modal-buttons">
                <button onclick="showAuthModal('login')" class="btn btn-primary">Sign In</button>
                <button onclick="showAuthModal('signup')" class="btn btn-secondary">Create Account</button>
            </div>
            <br>
            <a href="#" onclick="closeAuthRequiredModal(event)" style="color: var(--text-muted); text-decoration: none; font-size: 14px;">Close</a>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="cart-modal">
        <div class="cart-modal-overlay" onclick="closeCart()"></div>
        <div class="cart-modal-content">
            <div class="cart-header">
                <h2>Shopping Cart</h2>
                <button class="cart-close" onclick="closeCart()"></button>
            </div>
            
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically inserted -->
            </div>
            
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span class="cart-total-price">$0.00</span>
                </div>
                <button class="btn btn-primary" onclick="proceedToCheckout()">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <main id="main-content">
    <section class="hero">
        <div class="hero-background">
            <div class="hero-static-bg"></div>
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
        </div>

        <div class="hero-content">
            <!-- Hero Preview Carousel -->
            <div class="hero-preview-carousel">
                <div class="carousel-container">
                    <!-- Item 1 -->
                    <div class="carousel-item side" data-index="0">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Running Pack</div>
                                <div class="carousel-placeholder-subtext">12 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 2 -->
                    <div class="carousel-item side" data-index="1">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Combat Pack</div>
                                <div class="carousel-placeholder-subtext">24 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Featured Animation</div>
                        </div>
                    </div>

                    <!-- Center Item (Featured) - Item 3 -->
                    <div class="carousel-item center" data-index="2">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Acrobatic Pack</div>
                                <div class="carousel-placeholder-subtext">18 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 4 -->
                    <div class="carousel-item side" data-index="3">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Climbing Pack</div>
                                <div class="carousel-placeholder-subtext">16 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>

                    <!-- Item 5 -->
                    <div class="carousel-item side" data-index="4">
                        <div class="carousel-item-content">
                            <div class="carousel-placeholder">
                                <div class="carousel-placeholder-icon"></div>
                                <div class="carousel-placeholder-text">Sports Pack</div>
                                <div class="carousel-placeholder-subtext">20 animations</div>
                            </div>
                        </div>
                        <div class="carousel-overlay">
                            <div class="carousel-overlay-text">Motion Capture Preview</div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Dots -->
                <div class="carousel-dots">
                    <div class="carousel-dot" data-index="0"></div>
                    <div class="carousel-dot" data-index="1"></div>
                    <div class="carousel-dot active" data-index="2"></div>
                    <div class="carousel-dot" data-index="3"></div>
                    <div class="carousel-dot" data-index="4"></div>
                </div>
            </div>

            <div class="hero-badge">
                <div class="badge-dot"></div>
                Premium Motion Capture Library
            </div>
            
            <h1 class="hero-title font-sora">
                <span style="color: white;">Professional</span> <span class="gradient-text animated-gradient">Motion</span><br>
                <span class="gradient-text animated-gradient">Capture</span> <span style="color: white;">Animations</span>
            </h1>
            
            <p class="hero-subtitle">
                <span class="hero-subtitle-buy-gradient">Buy premium motion capture animations</span><br>
                <span class="hero-subtitle-secondary">for game development, film, and virtual production.</span><br>
                <span class="hero-subtitle-professional-glow">Professional mocap</span> <span class="hero-subtitle-platforms-gradient">for Unreal Engine, Unity, Blender, and all major 3D platforms.</span>
            </p>
            
            <!-- Platform Logos -->
            <div class="platform-logos">
                <img src="unreal-white.svg" alt="Unreal Engine" class="platform-logo">
                <img src="unity-white.svg" alt="Unity" class="platform-logo">
                <img src="blender-white.svg" alt="Blender" class="platform-logo">
            </div>
            
            <!-- Trust Badge (moved above buttons) -->
            <div class="trust-badge">
                <svg viewBox="0 0 24 24" fill="none" style="width: 16px; height: 16px; margin-right: 6px;">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                </svg>
                <span style="font-weight: 600;">100+ Professional Animations</span>
                <span style="margin: 0 8px; opacity: 0.5;"></span>
                <span>Instant download with <span style="color: var(--amber); font-weight: 600;">royalty-free</span> licenses</span>
            </div>
            
            <div class="hero-buttons">
                <a href="#library" class="btn-secondary btn-primary-cta" style="padding: 14px 28px; font-size: 15px; position: relative;">
                     Browse Library
                    <span class="button-shine"></span>
                </a>
                <a href="#" id="heroSignUpBtn" onclick="showAuthModal('signup'); return false;" class="btn-secondary" style="padding: 14px 28px; font-size: 15px;">
                     Get Started Free
                </a>
            </div>


            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Film Reel Icon for Exclusive Rights -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="7" cy="8" r="1.5" fill="currentColor"/>
                            <circle cx="7" cy="16" r="1.5" fill="currentColor"/>
                            <circle cx="17" cy="8" r="1.5" fill="currentColor"/>
                            <circle cx="17" cy="16" r="1.5" fill="currentColor"/>
                            <line x1="10" y1="4" x2="10" y2="20" stroke="currentColor" stroke-width="2"/>
                            <line x1="14" y1="4" x2="14" y2="20" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Exclusive Rights</span>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Diamond/Sparkle Icon for Studio Quality -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                        </svg>
                    </div>
                    <span>Studio Quality</span>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <!-- Lightning Download Icon for Instant Download -->
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" fill="currentColor"/>
                        </svg>
                    </div>
                    <span>Instant Download</span>
                </div>
            </div>

        </div>

        <div class="scroll-indicator">
            <svg class="icon" viewBox="0 0 24 24" style="width: 28px; height: 28px; color: var(--text-muted);">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        </div>
    </section>

    <!-- Library Section -->
    <section id="library" class="library-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title font-sora">
                    Explore Our <span class="gradient-text animated-gradient">Animation Library</span>
                </h2>
                <p class="section-subtitle">Professional mocap animations for every project</p>
            </div>

            <!-- Filters -->
            <div class="filters-card">
                <div class="search-box" style="position: relative;">
                    <span class="search-icon" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-size: 18px; opacity: 0.6;"></span>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search animations..." style="padding-left: 50px;">
                    <div class="search-dropdown-library" id="searchDropdownLibrary" style="display: none;">
                        <!-- Results populated here -->
                    </div>
                </div>

                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="categoryFilter">Category</label>
                        <select id="categoryFilter" class="filter-select">
                            <option value="All">All Categories</option>
                            <option value="Combat">Combat</option>
                            <option value="Locomotion">Locomotion</option>
                            <option value="Dance">Dance</option>
                            <option value="Idle">Idle</option>
                            <option value="Emotes">Emotes</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="genderFilter">Gender</label>
                        <select id="genderFilter" class="filter-select">
                            <option value="All">All</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Unisex">Unisex</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="styleFilter">Style</label>
                        <select id="styleFilter" class="filter-select">
                            <option value="All">All Styles</option>
                            <option value="Realistic">Realistic</option>
                            <option value="Stylized">Stylized</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="sortFilter">Sort By</label>
                        <select id="sortFilter" class="filter-select">
                            <option value="popular">Most Popular</option>
                            <option value="newest">Newest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                        </select>
                    </div>
                </div>

                <div class="results-count" id="resultsCount">Showing 12 of 12 animations</div>
            </div>

            <!-- Animation Grid -->
            <div class="animation-grid" id="animationGrid">
                <!-- Cards will be dynamically inserted here -->
            </div>

            <div class="bulk-actions" style="text-align: center; margin: 48px 0 24px; display: none;" id="bulkActions">
                <button class="btn btn-primary" style="padding: 16px 40px;" onclick="addSelectedToCart()">
                    <svg class="icon" viewBox="0 0 24 24" style="display: inline; margin-right: 8px;">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    Add Selected to Cart (<span id="selectedCount">0</span>)
                </button>
                <button class="btn btn-secondary" style="padding: 16px 40px; margin-left: 12px;" onclick="clearSelection()">Clear Selection</button>
            </div>

            <div class="load-more">
                <button type="button" class="btn btn-secondary" style="padding: 16px 40px;" onclick="loadMore(); return false;" id="loadMoreBtn">Load More Animations</button>
                <button type="button" class="btn btn-secondary" style="padding: 16px 40px; display: none;" onclick="scrollToTop(); return false;" id="backToTopBtn"> Back to Top</button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section style="background: var(--bg-secondary); padding: 80px 20px; border-top: 1px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 1400px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 16px;">
                    <span style="color: white;">Professional</span> <span class="gradient-text animated-gradient">Motion Capture</span> <span style="color: white;">for Every Project</span>
                </h2>
                <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto;">
                    Our motion capture animations are trusted by game developers, filmmakers, and 3D artists worldwide. 
                    Each mocap asset is studio-quality and ready for immediate use in your projects.
                </p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 32px;">
                <div class="feature-card" style="background: rgba(26, 26, 26, 0.6); padding: 32px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1); transition: all 0.3s ease; cursor: pointer;">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Game Development Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized motion capture animations for Unreal Engine and Unity. Perfect for AAA games, indie projects, and everything in between. 
                        All mocap files include standard FBX format for seamless integration.
                    </p>
                </div>
                
                <div class="feature-card" style="background: rgba(26, 26, 26, 0.6); padding: 32px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1); transition: all 0.3s ease; cursor: pointer;">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Film & Animation</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        High-quality mocap animations for film, TV, and animated content. Compatible with Blender, Maya, 3ds Max, and Cinema 4D. 
                        Professional motion capture data captured in our studio facility.
                    </p>
                </div>
                
                <div class="feature-card" style="background: rgba(26, 26, 26, 0.6); padding: 32px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1); transition: all 0.3s ease; cursor: pointer;">
                    <div style="font-size: 36px; margin-bottom: 16px;"></div>
                    <h3 style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy mocap animations and download immediately. No subscription required. 
                        Get lifetime access to your purchased motion capture files with unlimited re-downloads from your dashboard.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Request Section -->
    <section class="custom-request-section" id="contact">
        <div class="request-container">
            <div class="request-content">
                <div class="request-header">
                    <h2 class="section-title font-sora"><span style="color: white;">Need Custom</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: white;">?</span></h2>
                    <p class="request-subtitle">Can't find what you're looking for? Our team can create bespoke animations tailored to your exact specifications.</p>
                </div>
                
                <form class="request-form" id="customRequestForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Your Name</label>
                            <input type="text" name="name" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" name="email" placeholder="john@company.com" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Project Type</label>
                        <select name="projectType" required>
                            <option value="">Select a project type</option>
                            <option value="game">Game Development</option>
                            <option value="film">Film/Animation</option>
                            <option value="vr">VR/AR Experience</option>
                            <option value="training">Training/Simulation</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Budget Range (Optional)</label>
                        <select name="budget">
                            <option value="">Select budget range</option>
                            <option value="under-1k">Under $1,000</option>
                            <option value="1k-5k">$1,000 - $5,000</option>
                            <option value="5k-10k">$5,000 - $10,000</option>
                            <option value="10k-25k">$10,000 - $25,000</option>
                            <option value="25k-plus">$25,000+</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Describe Your Custom Animation Needs</label>
                        <textarea name="description" rows="5" placeholder="Tell us about the animations you need, including number of animations, style, character details, and timeline..." required></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <span>Submit Request</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" style="background: var(--bg-primary); padding: 100px 20px;">
        <div style="max-width: 900px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; color: white; margin-bottom: 16px;">
                    Frequently Asked Questions
                </h2>
                <p style="color: var(--text-secondary); font-size: 18px;">
                    Everything you need to know about buying motion capture animations
                </p>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 24px;">
                <!-- FAQ Item 1 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What is motion capture and how does it work?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Motion capture (mocap) is the process of recording real human movement and translating it into digital 3D animation data. 
                        Our professional motion capture animations are recorded in a studio using advanced mocap technology, then cleaned and optimized for use in 
                        game engines like Unreal Engine and Unity, as well as 3D software like Blender, Maya, and 3ds Max.
                    </p>
                </div>
                
                <!-- FAQ Item 2 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What file formats do your mocap animations come in?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        All motion capture animations are provided in industry-standard FBX format, which is compatible with Unreal Engine, Unity, Blender, Maya, 
                        3ds Max, Cinema 4D, and virtually all major 3D software and game engines. Each mocap asset includes clean, optimized animation data 
                        ready for immediate use in your projects.
                    </p>
                </div>
                
                <!-- FAQ Item 3 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Can I use these motion capture animations in commercial projects?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Yes! When you buy mocap animations from MocapWork, you receive a royalty-free license for commercial use. 
                        Use our professional motion capture in video games, films, commercials, virtual production, and any other commercial projects 
                        without additional fees or royalties. Perfect for game development studios, independent filmmakers, and 3D artists.
                    </p>
                </div>
                
                <!-- FAQ Item 4 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        How do I use motion capture animations in Unreal Engine?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Using our mocap animations in Unreal Engine is simple: 
                        1) Download your purchased motion capture files, 
                        2) Import the FBX file into your Unreal Engine project, 
                        3) Retarget the animation to your character skeleton, 
                        4) Start using the mocap in your game. 
                        Our animations are compatible with Unreal Engine 4 and Unreal Engine 5, including MetaHuman characters.
                    </p>
                </div>
                
                <!-- FAQ Item 5 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Are Unity mocap assets compatible with Unity?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Absolutely! Our motion capture animations work perfectly with Unity. Simply import the FBX file into your Unity project, 
                        and the mocap will be ready to use with your humanoid characters. Our Unity mocap assets are compatible with Unity's Mecanim animation system 
                        and work with all Unity versions. Perfect for Unity game development, VR projects, and real-time applications.
                    </p>
                </div>
                
                <!-- FAQ Item 6 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Do I need a subscription to buy mocap animations?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        No subscription required! Buy motion capture animations individually as you need them. 
                        Each purchase gives you lifetime access to download and re-download your mocap files from your personal dashboard. 
                        No monthly fees, no hidden costsjust affordable, professional motion capture animations from $1.
                    </p>
                </div>
                
                <!-- FAQ Item 7 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        What types of mocap animations do you offer?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Our motion capture library includes fighting animations, walking cycles, running animations, idle poses, combat moves, 
                        dance mocap, sports movements, everyday actions, and character interactions. 
                        All professional motion capture for game development, film production, and 3D animation projects. 
                        New mocap animations added regularly to expand our library.
                    </p>
                </div>
                
                <!-- FAQ Item 8 -->
                <div class="faq-item" style="background: var(--bg-secondary); padding: 28px; border-radius: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 20px; font-weight: 700; font-family: 'Sora', sans-serif; margin-bottom: 12px; color: var(--teal);">
                        Can I request custom motion capture animations?
                    </h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Yes! We offer custom motion capture services for game developers and studios who need specific animations. 
                        Fill out our custom request form below with your requirements, and our motion capture team will provide a quote. 
                        Custom mocap is perfect for unique character movements, specialized actions, or project-specific animation needs.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <!-- Why Choose MocapWork -->
    <section style="background: var(--bg-secondary); padding: 80px 20px; border-top: 1px solid rgba(0, 212, 255, 0.1);">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
            <h2 style="font-size: 42px; font-weight: 900; font-family: 'Sora', sans-serif; margin-bottom: 20px;">
                <span style="color: white;">Why Choose Mocap</span><span class="gradient-text animated-gradient">Work</span> <span style="color: white;">for</span> <span class="gradient-text animated-gradient">Motion Capture</span><span style="color: white;">?</span>
            </h2>
            <p style="color: var(--text-secondary); font-size: 18px; max-width: 700px; margin: 0 auto 50px;">
                Trusted by game developers, filmmakers, and 3D artists worldwide
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-top: 50px;">
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Studio Quality Mocap</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Professional motion capture recorded with industry-leading mocap technology
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Game Engine Ready</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Optimized for Unreal Engine, Unity, and all major game development platforms
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Royalty-Free License</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Use mocap animations in unlimited commercial projects with no extra fees
                    </p>
                </div>
                <div>
                    <div style="font-size: 48px; margin-bottom: 16px; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">Instant Download</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">
                        Buy and download motion capture files immediatelyno waiting
                    </p>
                </div>
            </div>
        </div>
    </section>

    </main>

    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="footer-logo">
                    <img src="logo.png" alt="MocapWork Logo" style="width: 50px; height: 50px; border-radius: 10px;">
                    <span class="logo-text font-sora">
                        Mocap<span>Work</span>
                    </span>
                </div>
                <p class="footer-description">
                    The premier destination for professional motion capture animations. 
                    Elevate your projects with studio-quality mocap data.
                </p>
                <div class="social-links">
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Product</h4>
                <ul class="footer-links">
                    <li><a href="#">Browse Library</a></li>
                    <li><a href="#">Pricing Plans</a></li>
                    <li><a href="#">Enterprise</a></li>
                    <li><a href="#">API Access</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="#">Documentation</a></li>
                    <li><a href="#">Tutorials</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright"> 2024 MocapWork. All rights reserved.</p>
            <div class="legal-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">License Agreement</a>
            </div>
        </div>
    </footer>

    <!-- Quick View Modal -->
    <div class="modal-overlay hidden" id="quickViewModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()"></button>
            <div id="modalBody"></div>
        </div>
    </div>


    <!-- Stripe.js for Payments -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // CACHE BUSTER - v9 - BUTTON TYPE + LOGGING
        console.log('========================================');
        console.log('INDEX.HTML VERSION 11 - ICON BADGES!');
        console.log('Loaded at:', new Date().toISOString());
        console.log('========================================');
        
        // Force scroll to top immediately on page load
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Detect when user comes back from Stripe (browser back button)
        window.addEventListener('pageshow', function(event) {
            // If page is being restored from cache (user clicked back)
            if (event.persisted) {
                const overlay = document.getElementById('stripe-loading-overlay');
                if (overlay) {
                    overlay.remove();
                }
            }
        });
        
        (function() {
            // Supabase Configuration
            const SUPABASE_URL = 'https://ekzablbemeponkrcitco.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVremFibGJlbWVwb25rcmNpdGNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NTkzNDQsImV4cCI6MjA4MTUzNTM0NH0.bhr5lIwDUA3prPuCN7mBj5Bn8lJhalPFu5MMS5I1g2I';
            
            // Initialize Supabase client
            const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            
            // Stripe Configuration
            const STRIPE_PUBLISHABLE_KEY = 'pk_test_51SfQ2BQBChX7okucx4uosVidKjSy2aeDtIAJz3G2DdkFcnKKZWp3byJ8ZbIbSMfvUL6mFpBinviFcjs6dQStaqTN000OZa3XQn';
            const stripe = window.Stripe ? window.Stripe(STRIPE_PUBLISHABLE_KEY) : null;
        
        // API Helper Functions
        const API = {
            // Get all animations with optional filters
            async getAnimations(filters = {}) {
                let query = supabaseClient
                    .from('animations')
                    .select(`
                        *,
                        animation_tags(
                            tag_id,
                            tags(name)
                        )
                    `);

                // Apply filters
                if (filters.category && filters.category !== 'All') {
                    query = query.eq('category', filters.category);
                }
                if (filters.gender && filters.gender !== 'All') {
                    query = query.eq('gender', filters.gender);
                }
                if (filters.style && filters.style !== 'All') {
                    query = query.eq('style', filters.style);
                }
                if (filters.search) {
                    query = query.ilike('title', `%${filters.search}%`);
                }

                // Apply sorting - ALWAYS include ID as secondary sort for consistency
                if (filters.sort === 'popular') {
                    query = query.order('popular', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'price-low') {
                    query = query.order('price', { ascending: true }).order('id', { ascending: true });
                } else if (filters.sort === 'price-high') {
                    query = query.order('price', { ascending: false }).order('id', { ascending: true });
                } else if (filters.sort === 'newest') {
                    query = query.order('created_at', { ascending: false }).order('id', { ascending: true });
                } else {
                    // DEFAULT: Order by ID for consistent results
                    query = query.order('id', { ascending: true });
                }

                const { data, error } = await query;
                
                if (error) {
                    console.error('Error fetching animations:', error);
                    return [];
                }

                // Transform data to match frontend format
                return data.map(anim => ({
                    id: anim.id,
                    title: anim.title,
                    slug: anim.slug,
                    description: anim.description,
                    price: parseFloat(anim.price),
                    duration: anim.duration,
                    category: anim.category,
                    gender: anim.gender,
                    style: anim.style,
                    popular: anim.popular,
                    onSale: anim.on_sale,
                    holidaySale: anim.holiday_sale,
                    salePercentage: anim.sale_percentage,
                    video: anim.video_url,
                    thumbnail: anim.thumbnail_url,
                    videoType: anim.video_type,
                    tags: anim.animation_tags && anim.animation_tags.length > 0 
                        ? anim.animation_tags.map(at => at.tags.name)
                        : [anim.category, anim.gender, anim.style].filter(Boolean),
                    frameRate: anim.frame_rate,
                    animationCount: anim.animation_count,
                    formats: anim.formats,
                    skeleton: anim.skeleton,
                    mocapProcess: anim.mocap_process
                }));
            },

            // Submit custom request
            async submitCustomRequest(formData) {
                const { data, error } = await supabaseClient
                    .from('custom_requests')
                    .insert([
                        {
                            name: formData.name,
                            email: formData.email,
                            project_type: formData.projectType,
                            description: formData.description,
                            budget: formData.budget || null
                        }
                    ]);

                if (error) {
                    console.error('Error submitting request:', error);
                    return { success: false, error: error.message };
                }

                return { success: true, data };
            },

            // Add to cart (localStorage for now)
            async addToCart(animationId) {
                const cart = JSON.parse(localStorage.getItem('cart') || '[]');
                if (!cart.includes(animationId)) {
                    cart.push(animationId);
                    localStorage.setItem('cart', JSON.stringify(cart));
                }
                return { success: true };
            },

            // Remove from cart
            async removeFromCart(animationId) {
                let cart = JSON.parse(localStorage.getItem('cart') || '[]');
                console.log('Removing from cart:', animationId, 'Current cart:', cart);
                cart = cart.filter(id => id !== animationId && id !== String(animationId));
                console.log('After removal:', cart);
                localStorage.setItem('cart', JSON.stringify(cart));
                return { success: true };
            },

            // Get cart items
            async getCartItems() {
                const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
                if (cartIds.length === 0) return [];
                
                const { data, error } = await supabaseClient
                    .from('animations')
                    .select('id, title, slug, price, thumbnail_url, video_url, video_type, on_sale, holiday_sale, sale_percentage')
                    .in('id', cartIds);
                
                return data || [];
            }
        };
        
        // Animation data
        // Animations will load from Supabase database
        let animations = [];
        let filteredAnimations = []; // Store current filtered/sorted results
        let selectedAnimations = [];
        let currentDisplayCount = 8;
        const itemsPerPage = 12;

        // Render animations
        function renderAnimations(filteredAnimations) {
            const grid = document.getElementById('animationGrid');
            grid.innerHTML = '';
            
            const displayAnimations = filteredAnimations.slice(0, currentDisplayCount);
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            
            // Show/hide load more button
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (loadMoreBtn) {
                if (filteredAnimations.length > displayAnimations.length) {
                    loadMoreBtn.style.display = 'inline-block';
                    if (backToTopBtn) backToTopBtn.style.display = 'none';
                } else {
                    loadMoreBtn.style.display = 'none';
                    if (backToTopBtn) backToTopBtn.style.display = 'inline-block';
                }
            }

            displayAnimations.forEach(anim => {
                const card = document.createElement('div');
                card.className = 'animation-card';
                
                let mediaElement = '';
                if (anim.videoType === 'image/gif') {
                    mediaElement = `<img src="${anim.video}" alt="${anim.title} - Professional motion capture animation for game development" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">`;
                } else {
                    mediaElement = `<img src="${anim.thumbnail}" alt="${anim.title} - Motion capture animation thumbnail" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;">`;
                }
                
                card.innerHTML = `
                    <div class="card-checkbox" onclick="event.stopPropagation(); toggleSelection('${anim.id}')">
                        <input type="checkbox" id="check-${anim.id}" />
                        <label for="check-${anim.id}"></label>
                    </div>
                    <a href="animation-detail.html?slug=${anim.slug}" style="text-decoration: none; color: inherit; display: block;">
                        <div class="card-thumbnail">
                            ${mediaElement}
                            <div class="card-overlay">
                                <div class="quick-preview-btn">View Details</div>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Icon badges below GIF, above title -->
                            <div style="display: flex; gap: 8px; margin-bottom: 12px; min-height: 32px; align-items: center;">
                                ${anim.popular ? `
                                    <div class="icon-badge icon-badge-popular" title="Popular">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                ` : ''}
                                ${anim.onSale ? `
                                    <div class="icon-badge icon-badge-sale" title="On Sale">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M21.41 11.58L12.41 2.58C12.05 2.22 11.55 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.55 2.22 12.05 2.59 12.42L11.59 21.42C11.95 21.78 12.45 22 13 22C13.55 22 14.05 21.78 14.41 21.41L21.41 14.41C21.78 14.05 22 13.55 22 13C22 12.45 21.77 11.94 21.41 11.58ZM5.5 7C4.67 7 4 6.33 4 5.5C4 4.67 4.67 4 5.5 4C6.33 4 7 4.67 7 5.5C7 6.33 6.33 7 5.5 7Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                ` : ''}
                                ${anim.holidaySale ? `
                                    <div class="icon-badge icon-badge-holiday" title="Holiday Sale">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6 3L8 8H16L18 3M8 8L3 21H21L16 8M8 8H16M12 11V17M9 14H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                ` : ''}
                            </div>
                            <h3 class="card-title">${anim.title}</h3>
                            <div class="card-tags">
                                ${anim.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                            </div>
                            <div class="card-footer">
                                <div class="card-duration">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    <span>${anim.duration}</span>
                                </div>
                                <div class="card-price">
                                    ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? `
                                        <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 2px;">
                                            <span style="font-size: 14px; font-weight: 500; text-decoration: line-through; text-decoration-color: var(--text-muted);">
                                                <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: var(--text-muted); text-decoration: line-through;">${anim.price.toFixed(2)}</span>
                                            </span>
                                            <span style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; line-height: 1;">
                                                <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: #FFFFFF;">${(anim.price * (1 - anim.salePercentage / 100)).toFixed(2)}</span>
                                            </span>
                                        </div>
                                    ` : `
                                        <span style="font-size: 22px; font-weight: 700; font-family: 'Sora', sans-serif; line-height: 1;">
                                            <span style="background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">$</span><span style="color: #FFFFFF;">${anim.price.toFixed(2)}</span>
                                        </span>
                                    `}
                                </div>
                            </div>
                        </div>
                    </a>
                    <div style="padding: 0 24px 24px;">
                        <button class="buy-now-btn" onclick="event.stopPropagation(); handleBuyNow('${anim.id}', '${anim.title}', ${(anim.onSale || anim.holidaySale) && anim.salePercentage ? (anim.price * (1 - anim.salePercentage / 100)).toFixed(2) : anim.price})">
                             Buy Now
                        </button>
                        <button class="add-to-cart-btn" onclick="event.stopPropagation(); handleAddToCart('${anim.id}')">
                            <svg class="icon" viewBox="0 0 24 24">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                            Add to Cart
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            // Debug: Log alignment values
            console.log('ALIGNMENT CHECK - Min Heights Applied:');
            console.log('  Badges: 60px, Title: 72px, Tags: 76px, Price: 56px');
            console.log('  Version: 2024-12-20-v3 - PRICE COLORS FIXED');

            document.getElementById('resultsCount').textContent = 
                `Showing ${Math.min(displayAnimations.length, filteredAnimations.length)} of ${filteredAnimations.length} animations`;
        }

        // Filter function
        function filterAnimations() {
            console.log('=== FILTER ANIMATIONS CALLED ===');
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const gender = document.getElementById('genderFilter').value;
            const style = document.getElementById('styleFilter').value;
            const sort = document.getElementById('sortFilter').value;
            
            console.log('Sort value:', sort);

            let filtered = animations.filter(anim => {
                const matchesSearch = !searchQuery || 
                    anim.title.toLowerCase().includes(searchQuery) ||
                    anim.tags.some(tag => tag.toLowerCase().includes(searchQuery));
                const matchesCategory = category === 'All' || anim.category === category;
                const matchesGender = gender === 'All' || anim.tags.includes(gender);
                const matchesStyle = style === 'All' || anim.tags.includes(style);

                return matchesSearch && matchesCategory && matchesGender && matchesStyle;
            });
            
            console.log('Filtered animations count:', filtered.length);
            console.log('First 3 titles BEFORE sort:', filtered.slice(0, 3).map(a => a.title));

            // Sort (stable - maintains original database order when values are equal)
            filtered.sort((a, b) => {
                if (sort === 'popular') {
                    if (b.popular !== a.popular) return b.popular - a.popular;
                    return a._originalIndex - b._originalIndex; // Maintain original order
                }
                if (sort === 'price-low') {
                    if (a.price !== b.price) return a.price - b.price;
                    return a._originalIndex - b._originalIndex;
                }
                if (sort === 'price-high') {
                    if (b.price !== a.price) return b.price - a.price;
                    return a._originalIndex - b._originalIndex;
                }
                return a._originalIndex - b._originalIndex; // Default: maintain database order
            });
            
            console.log('First 3 titles AFTER sort:', filtered.slice(0, 3).map(a => a.title));
            console.log('First 3 _originalIndex:', filtered.slice(0, 3).map(a => a._originalIndex));

            // Save filtered results and reset display count
            filteredAnimations = filtered;
            currentDisplayCount = 8; // Reset to 8 when filters change
            renderAnimations(filteredAnimations);
        }

        // Event listeners
        // Library search with dropdown
        const searchInputLibrary = document.getElementById('searchInput');
        const searchDropdownLibrary = document.getElementById('searchDropdownLibrary');
        let librarySearchTimeout;

        searchInputLibrary.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            // Also filter animations
            filterAnimations();
            
            // Show dropdown with suggestions
            clearTimeout(librarySearchTimeout);
            
            if (query.length === 0) {
                searchDropdownLibrary.style.display = 'none';
                return;
            }
            
            if (query.length < 2) return;
            
            librarySearchTimeout = setTimeout(() => {
                performLibrarySearch(query);
            }, 300);
        });

        // Enter key for library search
        searchInputLibrary.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchDropdownLibrary.style.display = 'none';
                filterAnimations();
                // Scroll to above animation grid
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100; // 100px above the grid
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }
        });

        function performLibrarySearch(query) {
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 6);
            
            // Suggested searches
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack'
            ].slice(0, 3);
            
            let html = '';
            
            // Suggested searches
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyLibrarySearch('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            // Animation results
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const highlighted = anim.title.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownLibrary.innerHTML = html;
            searchDropdownLibrary.style.display = 'block';
        }

        window.applyLibrarySearch = function(searchTerm) {
            searchInputLibrary.value = searchTerm;
            filterAnimations();
            searchDropdownLibrary.style.display = 'none';
        }

        // Close library dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-box')) {
                if (searchDropdownLibrary) {
                    searchDropdownLibrary.style.display = 'none';
                }
            }
        });

        document.getElementById('searchInput').addEventListener('input', filterAnimations);
        document.getElementById('categoryFilter').addEventListener('change', filterAnimations);
        document.getElementById('genderFilter').addEventListener('change', filterAnimations);
        document.getElementById('styleFilter').addEventListener('change', filterAnimations);
        document.getElementById('sortFilter').addEventListener('change', filterAnimations);

        // Navbar scroll effect & Sticky Browse Button
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            const stickyBtn = document.getElementById('stickyBrowseBtn');
            const librarySection = document.getElementById('library');
            
            if (window.scrollY > 20) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            
            // Show sticky button when scrolling past library (into features section)
            if (librarySection) {
                const libraryRect = librarySection.getBoundingClientRect();
                // Show when library section scrolls above viewport
                if (libraryRect.bottom < window.innerHeight - 200) {
                    stickyBtn.classList.add('show');
                } else {
                    stickyBtn.classList.remove('show');
                }
            }
        });

        // Modal functions
        function openModal(animId) {
            const anim = animations.find(a => a.id === animId);
            if (!anim) return;
            
            const modalBody = `
                <div class="modal-thumbnail"><img src="${anim.video || anim.thumbnail}" alt="${anim.title} - Motion capture animation preview" loading="lazy"></div>
                <div class="modal-body">
                    <h2 class="modal-title">${anim.title}</h2>
                    <p class="modal-description">${anim.description || "Professional motion capture animation."}</p>
                    <div class="modal-price">$${anim.price}</div>
                    <button class="buy-now-btn"> Buy Now - $${anim.price}</button>
                </div>
            `;
            
            document.getElementById("modalBody").innerHTML = modalBody;
            document.getElementById("quickViewModal").classList.remove("hidden");
        }
        
        function closeModal() {
            document.getElementById("quickViewModal").classList.add("hidden");
        }
        
        document.getElementById("quickViewModal").addEventListener("click", function(e) {
            if (e.target === this) closeModal();
        });
        
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeModal();
        });


        // Load More functionality
        window.loadMore = function() {
            console.log('=== LOAD MORE CLICKED ===');
            console.log('Current display count BEFORE:', currentDisplayCount);
            console.log('filteredAnimations length:', filteredAnimations.length);
            console.log('filteredAnimations:', filteredAnimations);
            
            if (!filteredAnimations || filteredAnimations.length === 0) {
                console.error('ERROR: filteredAnimations is empty!');
                alert('Error: No animations to display. Please refresh the page.');
                return;
            }
            
            currentDisplayCount += itemsPerPage;
            console.log('Current display count AFTER:', currentDisplayCount);
            console.log('Re-rendering with same filter/sort...');
            // Just re-render with increased count - DON'T re-filter or re-sort!
            renderAnimations(filteredAnimations);
        }
        
        window.scrollToTop = function() {
            document.getElementById('library').scrollIntoView({ behavior: 'smooth' });
        }

        // Stripe Payment Handlers
        window.handleBuyNow = async function(animationId, animationTitle, price) {
            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading overlay
            const loading = document.createElement('div');
            loading.id = 'stripe-loading-overlay';
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#00D4FF;">Processing Payment...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        animationId: animationId,
                        animationTitle: animationTitle,
                        price: price,
                        currentPage: '/mocap/index.html'
                    })
                });

                const { sessionId, error } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                const { error: stripeError } = await stripe.redirectToCheckout({ sessionId });

                if (stripeError) {
                    document.body.removeChild(loading);
                    alert('Error: ' + stripeError.message);
                }
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Payment error:', error);
                alert('Error processing payment. Please try again.');
            }
        }

        window.handleAddToCart = function(animationId) {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (!cart.includes(animationId)) {
                cart.push(animationId);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartBadge();
                
                // Google Analytics: Add to Cart
                const animation = animations.find(a => a.id === animationId);
                if (animation && typeof gtag !== 'undefined') {
                    gtag('event', 'add_to_cart', {
                        currency: 'USD',
                        value: animation.price,
                        items: [{
                            item_id: animation.id,
                            item_name: animation.title,
                            price: animation.price,
                            quantity: 1
                        }]
                    });
                }
                
                // Show success notification
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #10B981;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(16,185,129,0.4);';
                notification.innerHTML = '<div style="color:#86EFAC;font-weight:600;font-size:14px;"> Added to cart!</div>';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
            } else {
                // Show already in cart notification
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #F59E0B;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(245,158,11,0.4);';
                notification.innerHTML = '<div style="color:#FCD34D;font-weight:600;font-size:14px;"> Already in cart!</div>';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
            }
        }
        
        // Bulk selection functions
        window.toggleSelection = function(animationId) {
            const checkbox = document.getElementById(`check-${animationId}`);
            
            if (checkbox.checked) {
                if (!selectedAnimations.includes(animationId)) {
                    selectedAnimations.push(animationId);
                }
            } else {
                selectedAnimations = selectedAnimations.filter(id => id !== animationId);
            }
            
            updateBulkActions();
        }
        
        window.addSelectedToCart = function() {
            if (selectedAnimations.length === 0) {
                // Show warning notification
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #F59E0B;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(245,158,11,0.4);';
                notification.innerHTML = '<div style="color:#FCD34D;font-weight:600;font-size:14px;"> Please select animations first</div>';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
                return;
            }
            
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            let addedCount = 0;
            let alreadyInCartCount = 0;
            
            selectedAnimations.forEach(id => {
                if (!cart.includes(id)) {
                    cart.push(id);
                    addedCount++;
                } else {
                    alreadyInCartCount++;
                }
            });
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartBadge();
            
            // Show success notification
            if (addedCount > 0) {
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #10B981;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(16,185,129,0.4);';
                notification.innerHTML = `
                    <div style="color:#86EFAC;font-weight:600;font-size:14px;"> Added ${addedCount} animation${addedCount > 1 ? 's' : ''} to cart!</div>
                    ${alreadyInCartCount > 0 ? `<div style="color:#9CA3AF;font-size:12px;margin-top:4px;">${alreadyInCartCount} already in cart</div>` : ''}
                `;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            } else if (alreadyInCartCount > 0) {
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #F59E0B;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(245,158,11,0.4);';
                notification.innerHTML = '<div style="color:#FCD34D;font-weight:600;font-size:14px;"> All selected items already in cart!</div>';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
            }
            
            clearSelection();
        }
        
        window.clearSelection = function() {
            selectedAnimations = [];
            document.querySelectorAll('.card-checkbox input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            updateBulkActions();
        }
        
        function updateBulkActions() {
            const bulkActions = document.getElementById('bulkActions');
            const selectedCount = document.getElementById('selectedCount');
            
            if (selectedAnimations.length > 0) {
                bulkActions.style.display = 'block';
                selectedCount.textContent = selectedAnimations.length;
            } else {
                bulkActions.style.display = 'none';
            }
        }
        
        // Cart Modal Functions
        let selectedCartItems = [];
        
        window.openCart = async function() {
            const modal = document.getElementById('cartModal');
            modal.classList.add('active');
            await renderCartItems();
        }
        
        window.closeCart = function() {
            const modal = document.getElementById('cartModal');
            modal.classList.remove('active');
            selectedCartItems = [];
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
            }
        }
        
        async function renderCartItems() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            const cartItemsContainer = document.getElementById('cartItems');
            
            if (cartIds.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 80px; height: 80px; margin-bottom: 20px; opacity: 0.3;">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <h3 style="margin-bottom: 12px; font-size: 16px;">Your cart is empty</h3>
                        <p style="font-size: 13px; opacity: 0.7; line-height: 1.4;">Any animations you add to your cart will be displayed here.</p>
                    </div>
                `;
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>0.00';
                return;
            }
            
            try {
                const cartItems = await API.getCartItems();
                let total = 0;
                
                cartItemsContainer.innerHTML = cartItems.map(item => {
                    // Calculate sale price if applicable
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    const imageUrl = item.video_type === 'image/gif' ? item.video_url : item.thumbnail_url;
                    return `
                        <div class="cart-item">
                            <div class="cart-item-image">
                                <img src="${imageUrl}" alt="${item.title} - Motion capture animation" loading="lazy" />
                            </div>
                            <div class="cart-item-info">
                                <div class="cart-item-title">${item.title}</div>
                                <div class="cart-item-price">
                                    ${isOnSale ? `
                                        <div style="display: flex; flex-direction: column; gap: 4px;">
                                            <span style="font-size: 12px; color: var(--text-muted); text-decoration: line-through; text-decoration-color: #EF4444;">$${item.price.toFixed(2)}</span>
                                            <span style="font-size: 18px; font-weight: 800; color: #FFFFFF;"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</span>
                                        </div>
                                    ` : `<span class="price-dollar">$</span>${item.price.toFixed(2)}`}
                                </div>
                            </div>
                            <button class="cart-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                }).join('');
                
                document.querySelector('.cart-total-price').innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                
                // Add event listeners to remove buttons
                const removeButtons = cartItemsContainer.querySelectorAll('.cart-item-remove');
                removeButtons.forEach(btn => {
                    btn.addEventListener('click', async () => {
                        const animId = btn.getAttribute('data-id');
                        await removeFromCart(animId);
                    });
                });
            } catch (error) {
                console.error('Error loading cart:', error);
                cartItemsContainer.innerHTML = '<div class="cart-empty"><p>Error loading cart items</p></div>';
            }
        }
        
        // Remove single item from cart
        async function removeFromCart(animationId) {
            try {
                await API.removeFromCart(animationId);
                await renderCartItems();
                await updateCartBadge();
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }
        
        window.toggleCartItemSelection = function(itemId) {
            const checkbox = document.getElementById(`cart-check-${itemId}`);
            
            if (checkbox.checked) {
                if (!selectedCartItems.includes(itemId)) {
                    selectedCartItems.push(itemId);
                }
            } else {
                selectedCartItems = selectedCartItems.filter(id => id !== itemId);
            }
            
            updateCartRemoveButton();
        }
        
        function updateCartRemoveButton() {
            const removeBtn = document.getElementById('removeSelectedBtn');
            if (selectedCartItems.length > 0) {
                removeBtn.style.display = 'block';
                removeBtn.textContent = `Remove Selected (${selectedCartItems.length})`;
            } else {
                removeBtn.style.display = 'none';
            }
        }
        
        window.removeSelectedFromCart = function() {
            if (selectedCartItems.length === 0) return;
            
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            cart = cart.filter(id => !selectedCartItems.includes(id));
            localStorage.setItem('cart', JSON.stringify(cart));
            
            selectedCartItems = [];
            updateCartBadge();
            renderCartItems();
        }
        
        window.proceedToCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // Check if cart is empty first
            if (cartIds.length === 0) {
                // Show notification without closing cart
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #EF4444;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(239,68,68,0.4);';
                notification.innerHTML = '<div style="color:#FCA5A5;font-weight:600;font-size:14px;"> Your cart is empty!</div><div style="color:#9CA3AF;font-size:12px;margin-top:4px;">Add some animations to get started.</div>';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
                return;
            }
            
            // Cart has items, proceed with checkout
            closeCart();
            checkoutCart();
        }

        window.checkoutCart = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                showAuthModal('login');
                return;
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#F59E0B;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => ({
                            animationId: item.id,
                            animationTitle: item.title,
                            price: item.price
                        })),
                        currentPage: '/mocap/index.html'
                    })
                });

                const { sessionId, error } = await response.json();

                if (error) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout: ' + error);
                    return;
                }

                const { error: stripeError } = await stripe.redirectToCheckout({ sessionId });

                if (stripeError) {
                    document.body.removeChild(loading);
                    alert('Error: ' + stripeError.message);
                }
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            
            if (type === 'error') {
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #EF4444;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(239,68,68,0.4);';
                notification.innerHTML = `<div style="color:#FCA5A5;font-weight:600;font-size:14px;"> ${message}</div>`;
            } else {
                notification.style.cssText = 'position:fixed;top:80px;right:20px;background:#1A1A2E;border:2px solid #10B981;border-radius:12px;padding:16px 24px;z-index:99999;animation:slideInRight 0.3s ease;box-shadow:0 8px 24px rgba(16,185,129,0.4);';
                notification.innerHTML = `<div style="color:#86EFAC;font-weight:600;font-size:14px;"> ${message}</div>`;
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Load animations from Supabase
        async function loadAnimations() {
            try {
                animations = await API.getAnimations();
                // Add original index to each animation for stable sorting
                animations = animations.map((anim, index) => ({ ...anim, _originalIndex: index }));
                window.animations = animations; // Make available in console for debugging
                console.log('========================================');
                console.log('TOTAL ANIMATIONS IN DATABASE:', animations.length);
                console.log('========================================');
                console.log('Loaded animations:', animations);
                console.log('Popular flags:', animations.map(a => ({ title: a.title, popular: a.popular, onSale: a.onSale, holidaySale: a.holidaySale })));
                
                // Check for URL parameters (from animation detail page tags/category)
                const urlParams = new URLSearchParams(window.location.hash.split('?')[1] || '');
                const categoryParam = urlParams.get('category');
                const searchParam = urlParams.get('search');
                
                if (categoryParam) {
                    // Set category filter
                    const categorySelect = document.getElementById('categoryFilter');
                    if (categorySelect) {
                        categorySelect.value = categoryParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else if (searchParam) {
                    // Set search query
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.value = searchParam;
                    }
                    // Scroll to library
                    setTimeout(() => {
                        document.getElementById('library')?.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
                
                // Filter and render animations
                if (categoryParam || searchParam) {
                    filterAnimations();
                } else {
                    // Initial load - set filteredAnimations
                    filteredAnimations = animations;
                    renderAnimations(animations);
                }
            } catch (error) {
                console.error('Error loading animations:', error);
                alert('Error loading animations. Please make sure you have run the SQL schema in Supabase.');
            }
        }

        // Update filter function to work with database
        // Update cart badge
        async function updateCartBadge() {
            try {
                const cartItems = await API.getCartItems();
                const badge = document.querySelector('.cart-badge');
                if (badge) {
                    badge.textContent = cartItems.length;
                }
                
                // Update hover dropdown
                updateCartHoverDropdown(cartItems);
            } catch (error) {
                console.error('Error updating cart badge:', error);
            }
        }

        // Update cart hover dropdown
        function updateCartHoverDropdown(cartItems) {
            const cartHoverItems = document.getElementById('cartHoverItems');
            const cartHoverTotal = document.getElementById('cartHoverTotal');
            const checkoutBtn = document.getElementById('cartHoverCheckoutBtn');
            
            if (!cartHoverItems || !cartHoverTotal) return;
            
            if (cartItems.length === 0) {
                // Show empty state
                cartHoverItems.style.overflowY = 'hidden';
                cartHoverItems.innerHTML = `
                    <div class="cart-hover-empty">
                        <div class="cart-hover-empty-icon"></div>
                        <div>Your cart is empty</div>
                        <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;">Any animations you add to your cart will be displayed here.</div>
                    </div>
                `;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>0.00';
                if (checkoutBtn) checkoutBtn.style.display = 'none';
            } else {
                // Show cart items
                cartHoverItems.style.overflowY = 'auto';
                let total = 0;
                let html = '';
                
                cartItems.forEach(item => {
                    const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                    const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                    total += finalPrice;
                    
                    html += `
                        <div class="cart-hover-item" data-slug="${item.slug}">
                            <img src="${item.video_url}" alt="${item.title}" class="cart-hover-item-img">
                            <div class="cart-hover-item-info">
                                <div class="cart-hover-item-title">${item.title}</div>
                                <div class="cart-hover-item-price"><span class="price-dollar">$</span>${finalPrice.toFixed(2)}</div>
                            </div>
                            <button class="cart-hover-item-remove" data-id="${item.id}" title="Remove from cart">
                                
                            </button>
                        </div>
                    `;
                });
                
                cartHoverItems.innerHTML = html;
                cartHoverTotal.innerHTML = '<span class="price-dollar">$</span>' + total.toFixed(2);
                if (checkoutBtn) checkoutBtn.style.display = 'block';
                
                // Add event listeners to items and remove buttons
                const items = cartHoverItems.querySelectorAll('.cart-hover-item');
                items.forEach(item => {
                    const slug = item.getAttribute('data-slug');
                    const removeBtn = item.querySelector('.cart-hover-item-remove');
                    
                    item.addEventListener('click', (e) => {
                        if (!e.target.closest('.cart-hover-item-remove')) {
                            window.location.href = `animation-detail.html?slug=${slug}`;
                        }
                    });
                    
                    if (removeBtn) {
                        removeBtn.addEventListener('click', async (e) => {
                            e.stopPropagation();
                            const animId = removeBtn.getAttribute('data-id');
                            await removeFromCartHover(animId);
                        });
                    }
                });
            }
        }

        // Remove item from cart (from hover dropdown)
        window.removeFromCartHover = async function(animationId) {
            try {
                console.log('removeFromCartHover called with:', animationId);
                await API.removeFromCart(animationId);
                await updateCartBadge();
                showNotification('Removed from cart');
            } catch (error) {
                console.error('Error removing from cart:', error);
            }
        }

        // Handle checkout from cart hover dropdown
        window.handleCartHoverCheckout = async function() {
            const cartIds = JSON.parse(localStorage.getItem('cart') || '[]');
            
            if (cartIds.length === 0) {
                alert('Your cart is empty');
                return;
            }

            // Check if user is logged in
            const { data: { user } } = await supabaseClient.auth.getUser();
            if (!user) {
                document.getElementById('cartHoverDropdown').style.display = 'none';
                showAuthModal('login');
                return;
            }

            if (!stripe) {
                alert('Payment system is initializing. Please try again.');
                return;
            }

            // Show loading
            const loading = document.createElement('div');
            loading.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9999;';
            loading.innerHTML = '<div style="background:#1a1a1a;padding:40px;border-radius:16px;text-align:center;border:2px solid rgba(100, 116, 139, 0.3);"><div style="font-size:24px;margin-bottom:16px;"></div><div style="font-size:18px;font-weight:700;color:#F59E0B;">Processing Cart...</div><div style="color:#E7E5D3;margin-top:8px;">Please wait</div></div>';
            document.body.appendChild(loading);

            try {
                const cartItems = await API.getCartItems();
                
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        userId: user.id,
                        cartItems: cartItems.map(item => {
                            const isOnSale = (item.on_sale || item.holiday_sale) && item.sale_percentage;
                            const finalPrice = isOnSale ? item.price * (1 - item.sale_percentage / 100) : item.price;
                            return {
                                animationId: item.id,
                                animationTitle: item.title,
                                price: finalPrice
                            };
                        }),
                        currentPage: '/mocap/index.html'
                    })
                });

                const { sessionId } = await response.json();
                
                if (!sessionId) {
                    document.body.removeChild(loading);
                    alert('Error creating checkout session. Please try again.');
                    return;
                }

                const { error: stripeError } = await stripe.redirectToCheckout({ sessionId });

                if (stripeError) {
                    document.body.removeChild(loading);
                    alert('Error: ' + stripeError.message);
                }
            } catch (error) {
                document.body.removeChild(loading);
                console.error('Cart checkout error:', error);
                alert('Error processing cart. Please try again.');
            }
        }

        // Position and show/hide cart hover dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const cartIcon = document.getElementById('cartIconNav');
            const cartHoverDropdown = document.getElementById('cartHoverDropdown');
            let hideTimeout;

            function positionCartDropdown() {
                if (!cartIcon || !cartHoverDropdown) return;
                
                const rect = cartIcon.getBoundingClientRect();
                cartHoverDropdown.style.top = (rect.bottom + 12) + 'px';
                cartHoverDropdown.style.right = (window.innerWidth - rect.right) + 'px';
            }

            function showCartDropdown() {
                clearTimeout(hideTimeout);
                positionCartDropdown();
                cartHoverDropdown.style.display = 'block';
            }

            function hideCartDropdown() {
                hideTimeout = setTimeout(() => {
                    cartHoverDropdown.style.display = 'none';
                }, 100);
            }

            if (cartIcon && cartHoverDropdown) {
                cartIcon.addEventListener('mouseenter', showCartDropdown);
                cartIcon.addEventListener('mouseleave', hideCartDropdown);
                cartHoverDropdown.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                cartHoverDropdown.addEventListener('mouseleave', hideCartDropdown);
                
                // Reposition on scroll/resize
                window.addEventListener('scroll', positionCartDropdown);
                window.addEventListener('resize', positionCartDropdown);
            }
        });

        // Initial render - Load from database with progressive loading bar
        const loadingBar = document.getElementById('loadingBar');
        
        // Jump to 60% when scripts are loaded
        if (loadingBar) loadingBar.style.width = '60%';
        
        Promise.all([
            loadAnimations().then(() => {
                // Jump to 85% when animations loaded
                if (loadingBar) loadingBar.style.width = '85%';
            }),
            checkAuth()
        ]).then(() => {
            // Page fully loaded - complete to 100%
            if (loadingBar) {
                loadingBar.style.width = '100%';
                
                // Fade out and remove
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    loadingBar.style.transition = 'width 0.3s ease, opacity 0.3s ease';
                    setTimeout(() => {
                        loadingBar.style.display = 'none';
                    }, 300);
                }, 200);
            }
            
            // Update cart badge and dropdown
            updateCartBadge();
        }).catch(error => {
            console.error('Error loading page:', error);
            // On error, complete in red
            if (loadingBar) {
                loadingBar.style.width = '100%';
                loadingBar.style.background = 'linear-gradient(90deg, #ef4444, #f59e0b)';
                setTimeout(() => {
                    loadingBar.style.opacity = '0';
                    setTimeout(() => loadingBar.style.display = 'none', 300);
                }, 500);
            }
        });

        // Check authentication status
        async function checkAuth() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (session) {
                document.getElementById('authLinks').style.display = 'none';
                document.getElementById('userMenu').style.display = 'block';
                // Hide mobile auth link when logged in
                const mobileAuthLink = document.getElementById('mobileAuthLink');
                if (mobileAuthLink) mobileAuthLink.style.display = 'none';
                // Hide hero Sign Up button when logged in
                const heroSignUpBtn = document.getElementById('heroSignUpBtn');
                if (heroSignUpBtn) heroSignUpBtn.style.display = 'none';
                
                // Check if user is admin
                checkAdminStatus(session.user.id);
            }
            return session?.user || null;
        }

        // Check if user has admin role and show admin button
        async function checkAdminStatus(userId) {
            console.log('=== ADMIN CHECK ===');
            console.log('Checking admin status for user ID:', userId);
            
            const { data: userRole, error } = await supabaseClient
                .from('user_roles')
                .select('role')
                .eq('user_id', userId)
                .single();
            
            console.log('User role query result:', userRole);
            console.log('User role query error:', error);
            
            if (userRole && userRole.role === 'admin') {
                console.log(' User IS admin - showing button');
                const adminBtn = document.getElementById('adminDashboardBtn');
                console.log('Admin button element:', adminBtn);
                if (adminBtn) {
                    adminBtn.style.display = 'inline-flex';
                    console.log('Admin button should now be visible');
                } else {
                    console.error(' Admin button element not found in DOM');
                }
            } else {
                console.log(' User is NOT admin');
            }
        }

        window.logout = async function() {
            await supabaseClient.auth.signOut();
            location.reload();
        }

        // Check URL hash for modal triggers (from animation-detail page)
        window.addEventListener('load', function() {
            const hash = window.location.hash;
            
            // Handle auth and cart modals
            if (hash.startsWith('#auth=')) {
                // Force scroll to top for auth modal
                window.scrollTo(0, 0);
                const authType = hash.split('=')[1];
                showAuthModal(authType);
            } else if (hash === '#cart') {
                // Force scroll to top for cart modal
                window.scrollTo(0, 0);
                openCart();
            } else if (hash === '#checkout') {
                // Handle checkout from other pages
                window.scrollTo(0, 0);
                handleCartHoverCheckout();
            } else if (hash === '#library' || hash === '#contact' || hash === '#faq') {
                // Scroll to the section after a brief delay to ensure page is loaded
                setTimeout(() => {
                    const section = document.querySelector(hash);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 100);
            } else {
                // No hash or unknown hash - scroll to top
                window.scrollTo(0, 0);
            }
        });

        // Auth Modal Functions
        window.showAuthModal = function(tab = 'login') {
            // Close auth required modal first
            document.getElementById('authRequiredModal').classList.remove('active');
            // Show auth modal
            document.getElementById('authModal').classList.add('active');
            switchAuthTab(tab);
        }

        window.closeAuthModal = function() {
            document.getElementById('authModal').classList.remove('active');
            
            // Check if there's a return URL from animation-detail page
            const returnUrl = sessionStorage.getItem('returnUrl');
            if (returnUrl) {
                sessionStorage.removeItem('returnUrl');
                window.location.href = returnUrl;
                return;
            }
            
            // Clear forms
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupConfirmPassword').value = '';
            document.getElementById('loginMessage').innerHTML = '';
            document.getElementById('signupMessage').innerHTML = '';
        }

        window.switchAuthTab = function(tab) {
            // Update tabs
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }

        window.togglePassword = function(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('.eye-icon');
            
            if (input.type === 'password') {
                input.type = 'text';
                // Change to eye-slash icon
                icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
            } else {
                input.type = 'password';
                // Change back to eye icon
                icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
            }
        }

        window.handleLogin = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');
            const messageDiv = document.getElementById('loginMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            loginBtn.disabled = true;
            loginBtn.textContent = 'Signing in...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                messageDiv.innerHTML = '<div class="auth-message success">Login successful! Redirecting...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1000);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                loginBtn.disabled = false;
                loginBtn.textContent = 'Sign In';
            }
        }

        window.handleSignup = async function(event) {
            event.preventDefault();
            
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const signupBtn = document.getElementById('signupBtn');
            const messageDiv = document.getElementById('signupMessage');
            const loadingBar = document.getElementById('authLoadingBar');
            
            if (password !== confirmPassword) {
                messageDiv.innerHTML = '<div class="auth-message error">Passwords do not match</div>';
                return;
            }
            
            if (password.length < 6) {
                messageDiv.innerHTML = '<div class="auth-message error">Password must be at least 6 characters</div>';
                return;
            }
            
            // Show and animate loading bar
            loadingBar.style.display = 'block';
            loadingBar.style.width = '30%';
            
            signupBtn.disabled = true;
            signupBtn.textContent = 'Creating account...';
            messageDiv.innerHTML = '';
            
            try {
                // Progress to 60%
                setTimeout(() => { loadingBar.style.width = '60%'; }, 200);
                
                const { data, error } = await supabaseClient.auth.signUp({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Complete to 100%
                loadingBar.style.width = '100%';
                
                // Google Analytics: Sign Up Event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'sign_up', {
                        method: 'Email'
                    });
                }
                
                messageDiv.innerHTML = '<div class="auth-message success">Account created! Logging you in...</div>';
                setTimeout(() => {
                    closeAuthModal();
                    location.reload();
                }, 1500);
                
            } catch (error) {
                // Hide loading bar on error
                loadingBar.style.width = '0';
                setTimeout(() => { loadingBar.style.display = 'none'; }, 300);
                
                messageDiv.innerHTML = `<div class="auth-message error">${error.message}</div>`;
                signupBtn.disabled = false;
                signupBtn.textContent = 'Create Account';
            }
        }

        // Handle My Library click - show modal if not logged in
        window.handleDashboardClick = async function(event) {
            event.preventDefault();
            
            const { data: { user } } = await supabaseClient.auth.getUser();
            
            if (user) {
                // User is logged in, go to dashboard
                window.location.href = 'dashboard.html';
            } else {
                // User not logged in, show auth required modal
                document.getElementById('authRequiredModal').classList.add('active');
            }
        }

        window.closeAuthRequiredModal = function(event) {
            if (event) event.preventDefault();
            document.getElementById('authRequiredModal').classList.remove('active');
        }

        // Mobile menu toggle
        // Mobile menu toggle
        window.toggleMobileMenu = function() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
            
            // Hide mobile menu when logged in user menu is shown
            if (document.getElementById('userMenu').style.display === 'block') {
                document.getElementById('mobileAuthLink').style.display = 'none';
            }
        }
        
        document.querySelector('.hamburger-menu').addEventListener('click', toggleMobileMenu);
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const navLinks = document.querySelector('.nav-links');
            const mobileMenuBtn = document.querySelector('.hamburger-menu');
            
            if (navLinks.classList.contains('active') && 
                !navLinks.contains(e.target) && 
                !mobileMenuBtn.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Custom request form handler
        document.getElementById('customRequestForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                name: this.name.value,
                email: this.email.value,
                projectType: this.projectType.value,
                description: this.description.value,
                budget: this.budget.value || null
            };
            
            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>Submitting...</span>';
            
            try {
                const result = await API.submitCustomRequest(formData);
                
                if (result.success) {
                    alert('Thank you for your request! We\'ll get back to you within 24 hours.');
                    this.reset();
                } else {
                    alert('Error submitting request. Please try again.');
                }
            } catch (error) {
                console.error('Form error:', error);
                alert('Error submitting request. Please try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>Submit Request</span><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>';
            }
        });
        
        // Advanced Search Functionality (in navbar)
        const searchInputNav = document.getElementById('searchInputNav');
        const searchClearNav = document.getElementById('searchClearNav');
        const searchDropdownNav = document.getElementById('searchDropdownNav');
        
        let searchTimeout;
        
        if (searchInputNav) {
            searchInputNav.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                // Show/hide clear button
                searchClearNav.style.display = query ? 'block' : 'none';
                
                // Debounce search
                clearTimeout(searchTimeout);
                
                if (query.length === 0) {
                    searchDropdownNav.classList.remove('active');
                    return;
                }
                
                if (query.length < 2) return;
                
                searchTimeout = setTimeout(() => {
                    performSearchNav(query);
                }, 300);
            });

            // Enter key for navbar search
            searchInputNav.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (query) {
                        applySearchNav(query);
                    }
                }
            });
        }
        
        function performSearchNav(query) {
            console.log('performSearchNav called with query:', query);
            console.log('animations array:', animations);
            console.log('animations length:', animations ? animations.length : 'undefined');
            
            const lowerQuery = query.toLowerCase();
            
            // Filter animations (handle null values)
            const results = animations.filter(anim => 
                (anim.title && anim.title.toLowerCase().includes(lowerQuery)) ||
                (anim.category && anim.category.toLowerCase().includes(lowerQuery)) ||
                (anim.style && anim.style.toLowerCase().includes(lowerQuery))
            ).slice(0, 5);
            
            console.log('Search results:', results);
            
            // Build dropdown
            let html = '';
            
            // Animation results with thumbnails
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 1px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: var(--teal); font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            // Suggested searches below animations
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking',
                'running',
                'combat'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested Searches</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applySearchNav('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            console.log('Generated HTML:', html);
            searchDropdownNav.innerHTML = html;
            searchDropdownNav.classList.add('active');
        }
        
        window.applySearchNav = function(searchTerm) {
            searchInputNav.value = searchTerm;
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownNav.classList.remove('active');
            // Scroll to above animation grid
            const animationGrid = document.getElementById('animationGrid');
            if (animationGrid) {
                const yOffset = -100; // 100px above the grid
                const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                window.scrollTo({ top: y, behavior: 'smooth' });
            }
        }
        
        window.clearSearchNav = function() {
            searchInputNav.value = '';
            searchClearNav.style.display = 'none';
            searchDropdownNav.classList.remove('active');
        }
        
        // Mobile search handler with dropdown
        const mobileSearchInput = document.getElementById('mobileSearch');
        const searchDropdownMobile = document.getElementById('searchDropdownMobile');
        let mobileSearchTimeout;

        if (mobileSearchInput) {
            mobileSearchInput.addEventListener('input', function(e) {
                const query = e.target.value.trim();
                
                clearTimeout(mobileSearchTimeout);
                
                if (query.length === 0) {
                    searchDropdownMobile.style.display = 'none';
                    return;
                }
                
                if (query.length < 2) return;
                
                mobileSearchTimeout = setTimeout(() => {
                    performMobileSearch(query);
                }, 300);
            });

            // Enter key for mobile search
            mobileSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const query = e.target.value.trim();
                    if (query) {
                        applyMobileSearch(query);
                    }
                }
            });
        }

        function performMobileSearch(query) {
            const lowerQuery = query.toLowerCase();
            
            const results = animations.filter(anim => 
                anim.title.toLowerCase().includes(lowerQuery) ||
                anim.category.toLowerCase().includes(lowerQuery) ||
                anim.style.toLowerCase().includes(lowerQuery)
            ).slice(0, 5);
            
            let html = '';
            
            // Animation results with thumbnails first
            if (results.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Animations</div>';
                results.forEach(anim => {
                    const imageUrl = anim.video_type === 'image/gif' ? anim.video_url : anim.thumbnail_url;
                    const isOnSale = (anim.on_sale || anim.holiday_sale) && anim.sale_percentage;
                    const finalPrice = isOnSale ? anim.price * (1 - anim.sale_percentage / 100) : anim.price;
                    
                    html += `
                        <div class="search-result-item" onclick="window.location.href='animation-detail.html?slug=${anim.slug}'" style="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-bottom: 1px solid rgba(0, 212, 255, 0.1); transition: all 0.2s;">
                            <img src="${imageUrl}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">${anim.title}</div>
                                <div style="font-size: 14px; color: var(--teal); font-weight: 600;">$${finalPrice.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            // Suggested searches below
            const suggestions = [
                query,
                'fantasy ' + query,
                query + ' pack',
                'walking',
                'running',
                'combat'
            ].slice(0, 4);
            
            if (suggestions.length > 0) {
                html += '<div class="search-section">';
                html += '<div class="search-section-title">Suggested Searches</div>';
                suggestions.forEach(sugg => {
                    const highlighted = sugg.replace(new RegExp(query, 'gi'), match => `<strong>${match}</strong>`);
                    html += `<div class="search-result-item" onclick="applyMobileSearch('${sugg}')">`;
                    html += '<div class="search-result-icon"></div>';
                    html += `<div class="search-result-text">${highlighted}</div>`;
                    html += '</div>';
                });
                html += '</div>';
            }
            
            searchDropdownMobile.innerHTML = html;
            searchDropdownMobile.style.display = 'block';
        }

        window.applyMobileSearch = function(searchTerm) {
            const librarySearchInput = document.getElementById('searchInput');
            if (librarySearchInput) {
                librarySearchInput.value = searchTerm;
            }
            filterAnimations();
            searchDropdownMobile.style.display = 'none';
            toggleMobileMenu();
            
            // Scroll to animation grid
            setTimeout(() => {
                const animationGrid = document.getElementById('animationGrid');
                if (animationGrid) {
                    const yOffset = -100;
                    const y = animationGrid.getBoundingClientRect().top + window.pageYOffset + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (searchInputNav && !e.target.closest('.nav-search')) {
                searchDropdownNav.classList.remove('active');
            }
        });
        
        updateCartBadge();
        })(); // End of IIFE
    </script>
    <!-- Thank You Modal -->
    <div id="thankYouModal" class="auth-modal">
        <div class="auth-modal-overlay" onclick="closeThankYouModal()"></div>
        <div class="auth-modal-box" style="max-width: 500px;">
            <button class="auth-close" onclick="closeThankYouModal()"></button>
            
            <div style="padding: 32px;">
                <!-- Success Icon -->
                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.05)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                    <svg width="30" height="30" fill="none" stroke="#10B981" stroke-width="3" viewBox="0 0 24 24">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </div>

                <h2 style="font-size: 28px; font-weight: 800; font-family: 'Sora', sans-serif; margin-bottom: 6px; text-align: center; background: linear-gradient(135deg, var(--teal), var(--amber)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Payment Successful!
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px; font-size: 14px; text-align: center;">
                    Thank you for your purchase. Your download is ready!
                </p>

                <!-- Loading State -->
                <div id="thankYouLoading" style="text-align: center; padding: 20px;">
                    <div class="spinner" style="margin: 0 auto 12px;"></div>
                    <span style="color: var(--text-muted); font-size: 14px;">Preparing your download...</span>
                </div>

                <!-- Animation Preview -->
                <div id="thankYouPreview" style="display: none; margin-bottom: 20px;">
                    <div style="background: var(--bg-secondary); border-radius: 12px; padding: 12px; border: 1px solid rgba(0, 212, 255, 0.1);">
                        <img id="thankYouGif" src="" alt="Animation Preview" style="width: 100%; max-width: 200px; border-radius: 8px; display: block; margin: 0 auto;">
                        <p id="thankYouAnimationName" style="text-align: center; margin-top: 8px; font-weight: 600; color: var(--text-primary); font-size: 14px;"></p>
                    </div>
                </div>

                <!-- Download Button -->
                <div id="thankYouDownload" style="display: none; text-align: center; margin-bottom: 20px;">
                    <a href="#" id="thankYouDownloadBtn" class="btn btn-primary" style="display: inline-flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; padding: 14px 28px; font-size: 15px;">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Your Files
                    </a>
                    <p style="color: var(--text-muted); font-size: 12px; margin-top: 10px;">
                        You can re-download anytime from your <a href="#" onclick="handleDashboardClick(event); closeThankYouModal(); return false;" style="color: var(--teal); text-decoration: none;">Dashboard</a>
                    </p>
                </div>

                <!-- Order Details -->
                <div id="thankYouOrderDetails" style="display: none; background: rgba(26, 26, 26, 0.4); border-radius: 10px; padding: 16px; border: 1px solid rgba(0, 212, 255, 0.1);">
                    <h3 style="font-size: 14px; font-weight: 700; margin-bottom: 12px; color: var(--text-primary);">Order Details</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Order ID</span>
                            <span id="thankYouOrderId" style="color: var(--text-primary); font-size: 12px; font-family: monospace;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Animation</span>
                            <span id="thankYouOrderAnimation" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Amount Paid</span>
                            <span id="thankYouOrderAmount" style="color: var(--text-primary); font-size: 13px; font-weight: 600;">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted); font-size: 13px;">Date</span>
                            <span id="thankYouOrderDate" style="color: var(--text-primary); font-size: 13px;">-</span>
                        </div>
                    </div>
                </div>

                <!-- Error State -->
                <div id="thankYouError" style="display: none; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 14px; text-align: center;">
                    <p id="thankYouErrorMessage" style="color: #EF4444; font-size: 13px; margin: 0;"></p>
                </div>
            </div>
        </div>
    </div>

    <style>
    /* Thank You Modal Spinner */
    #thankYouModal .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 212, 255, 0.1);
        border-top-color: var(--teal);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    </style>

    <script>
    // Thank You Modal Functions
    let thankYouModalOpen = false;

    function closeThankYouModal() {
        document.getElementById('thankYouModal').classList.remove('active');
        thankYouModalOpen = false;
        
        // Clear the success parameter from URL without reloading
        const url = new URL(window.location);
        url.searchParams.delete('session_id');
        url.searchParams.delete('payment_success');
        window.history.replaceState({}, '', url);
        
        // Clear cart since purchase was successful
        localStorage.removeItem('cart');
        if (typeof updateCartBadge === 'function') updateCartBadge();
    }

    async function showThankYouModal(sessionId) {
        thankYouModalOpen = true;
        document.getElementById('thankYouModal').classList.add('active');
        
        // Initialize supabase client if not already available
        const SUPABASE_URL = 'https://ekzablbemeponkrcitco.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVremFibGJlbWVwb25rcmNpdGNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NTkzNDQsImV4cCI6MjA4MTUzNTM0NH0.bhr5lIwDUA3prPuCN7mBj5Bn8lJhalPFu5MMS5I1g2I';
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Show loading state
        document.getElementById('thankYouLoading').style.display = 'block';
        document.getElementById('thankYouPreview').style.display = 'none';
        document.getElementById('thankYouDownload').style.display = 'none';
        document.getElementById('thankYouOrderDetails').style.display = 'none';
        document.getElementById('thankYouError').style.display = 'none';
        
        try {
            // Get user session
            const { data: { session } } = await supabaseClient.auth.getSession();
            
            if (!session) {
                throw new Error('Please sign in to view your purchase');
            }
            
            // Query purchase from database
            const { data: purchase, error } = await supabaseClient
                .from('purchases')
                .select('*, animations(*)')
                .eq('stripe_session_id', sessionId)
                .eq('user_id', session.user.id)
                .single();
            
            if (error || !purchase) {
                throw new Error('Purchase not found. Please contact support if you were charged.');
            }
            
            // Hide loading
            document.getElementById('thankYouLoading').style.display = 'none';
            
            // Show animation preview
            if (purchase.animations.video_url) {
                document.getElementById('thankYouPreview').style.display = 'block';
                document.getElementById('thankYouGif').src = purchase.animations.video_url;
                document.getElementById('thankYouAnimationName').textContent = purchase.animations.title;
            }
            
            // Show download button
            if (purchase.animations.file_url) {
                document.getElementById('thankYouDownload').style.display = 'block';
                document.getElementById('thankYouDownloadBtn').href = purchase.animations.file_url;
            }
            
            // Show order details
            document.getElementById('thankYouOrderDetails').style.display = 'block';
            document.getElementById('thankYouOrderId').textContent = sessionId.substring(0, 20) + '...';
            document.getElementById('thankYouOrderAnimation').textContent = purchase.animations.title;
            document.getElementById('thankYouOrderAmount').textContent = '$' + purchase.amount_paid.toFixed(2);
            document.getElementById('thankYouOrderDate').textContent = new Date(purchase.purchase_date).toLocaleDateString();
            
        } catch (error) {
            console.error('Error loading purchase:', error);
            document.getElementById('thankYouLoading').style.display = 'none';
            document.getElementById('thankYouError').style.display = 'block';
            document.getElementById('thankYouErrorMessage').textContent = error.message || 'Unable to load purchase details. Please contact support.';
        }
    }

    // Check URL for payment success on page load
    window.addEventListener('load', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('session_id');
        const paymentSuccess = urlParams.get('payment_success');
        
        if (sessionId && paymentSuccess === 'true') {
            // Small delay to ensure page is loaded
            setTimeout(() => {
                showThankYouModal(sessionId);
            }, 500);
        }
    });
    </script>

    <!-- Cart Hover Dropdown (Outside Navbar) -->
    <div class="cart-hover-dropdown" id="cartHoverDropdown">
        <div class="cart-hover-header">Shopping Cart</div>
        <div class="cart-hover-items" id="cartHoverItems">
            <!-- Items populated by JavaScript -->
        </div>
        <div class="cart-hover-footer">
            <div class="cart-hover-total">
                <span>Total:</span>
                <span id="cartHoverTotal">$0.00</span>
            </div>
            <button id="cartHoverCheckoutBtn" class="btn btn-primary" onclick="handleCartHoverCheckout()" style="width: 100%; margin-top: 12px; display: none;">
                Proceed to Checkout
            </button>
            <button class="btn btn-secondary" onclick="openCart(); event.stopPropagation();" style="width: 100%; margin-top: 12px;">
                View Full Cart
            </button>
        </div>
    </div>

    <!-- Floating Particles Script -->
    <script>
        // Create floating particles in hero
        function createParticles() {
            const hero = document.querySelector('.hero');
            if (!hero) return;
            
            const particleCount = 25;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random horizontal position
                particle.style.left = Math.random() * 100 + '%';
                
                // Stagger particles throughout entire vertical range
                const verticalSpread = Math.random() * 100;
                particle.style.bottom = verticalSpread + 'vh';
                
                // Random animation duration (12-35 seconds for varied speeds)
                const duration = 12 + Math.random() * 23;
                particle.style.animationDuration = duration + 's';
                
                // Random delay (0-20 seconds)
                particle.style.animationDelay = Math.random() * 20 + 's';
                
                // Random size (2-6px for variety)
                const size = 2 + Math.random() * 4;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                // Add color variation (amber, teal, coral)
                const colors = [
                    'rgba(245, 158, 11, 0.8)',  // Amber
                    'rgba(0, 212, 255, 0.6)',   // Teal  
                    'rgba(255, 107, 107, 0.7)'  // Coral
                ];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = `radial-gradient(circle, ${randomColor}, transparent)`;
                
                hero.appendChild(particle);
            }
        }
        
        // Initialize particles when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createParticles);
        } else {
            createParticles();
        }
        
        // Pause animations when tab is inactive
        document.addEventListener('visibilitychange', function() {
            const hero = document.querySelector('.hero');
            if (document.hidden) {
                hero.style.animationPlayState = 'paused';
                hero.querySelectorAll('.particle').forEach(p => p.style.animationPlayState = 'paused');
            } else {
                hero.style.animationPlayState = 'running';
                hero.querySelectorAll('.particle').forEach(p => p.style.animationPlayState = 'running');
            }
        });
    </script>

    <!-- Carousel Auto-Rotation Script -->
    <script>
        // Carousel state
        let currentIndex = 2; // Start with 3rd item (index 2 - Acrobatic Pack)
        let carouselInterval;
        
        // Carousel data (5 items)
        const carouselData = [
            { icon: '', title: 'Running Pack', subtitle: '12 animations', label: 'Motion Capture Preview' },
            { icon: '', title: 'Combat Pack', subtitle: '24 animations', label: 'Featured Animation' },
            { icon: '', title: 'Acrobatic Pack', subtitle: '18 animations', label: 'Motion Capture Preview' },
            { icon: '', title: 'Climbing Pack', subtitle: '16 animations', label: 'Motion Capture Preview' },
            { icon: '', title: 'Sports Pack', subtitle: '20 animations', label: 'Motion Capture Preview' }
        ];

        function updateCarousel(selectedIndex) {
            const items = document.querySelectorAll('.carousel-item');
            const dots = document.querySelectorAll('.carousel-dot');
            
            if (!items.length) return;

            const totalItems = items.length;
            
            // Calculate positions relative to selected item
            items.forEach((item, index) => {
                const dataIndex = parseInt(item.getAttribute('data-index'));
                
                // Calculate offset from selected item (-2 to +2)
                let offset = dataIndex - selectedIndex;
                
                // Wrap around to keep within -2 to +2 range
                while (offset > 2) offset -= totalItems;
                while (offset < -2) offset += totalItems;
                
                // Apply classes based on position
                item.classList.remove('side', 'center', 'pos-far-left', 'pos-left', 'pos-center', 'pos-right', 'pos-far-right');
                
                if (offset === 0) {
                    // Center item
                    item.classList.add('center', 'pos-center');
                } else {
                    // Side items
                    item.classList.add('side');
                    
                    // Add specific position class for smooth transitions
                    if (offset === -2) item.classList.add('pos-far-left');
                    else if (offset === -1) item.classList.add('pos-left');
                    else if (offset === 1) item.classList.add('pos-right');
                    else if (offset === 2) item.classList.add('pos-far-right');
                }
            });

            // Update dots
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === selectedIndex);
            });
            
            // Update current index
            currentIndex = selectedIndex;
        }

        function startCarousel() {
            carouselInterval = setInterval(() => {
                const nextIndex = (currentIndex + 1) % carouselData.length;
                updateCarousel(nextIndex);
            }, 6000);
        }

        function stopCarousel() {
            clearInterval(carouselInterval);
        }
        
        // Pause carousel when tab is inactive
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopCarousel();
            } else {
                startCarousel();
            }
        });

        // Initialize carousel
        function initCarousel() {
            const dots = document.querySelectorAll('.carousel-dot');
            const items = document.querySelectorAll('.carousel-item');

            // Add click handlers to dots
            // Add click handlers to dots
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    stopCarousel();
                    updateCarousel(index);
                    startCarousel();
                });
            });

            // Add click handlers to items
            items.forEach((item) => {
                item.addEventListener('click', () => {
                    const index = parseInt(item.getAttribute('data-index'));
                    stopCarousel();
                    updateCarousel(index);
                    startCarousel();
                });
            });

            // Pause on hover
            const carousel = document.querySelector('.hero-preview-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', stopCarousel);
                carousel.addEventListener('mouseleave', startCarousel);
            }

            // Initialize to starting position (Acrobatic Pack - index 2)
            updateCarousel(2);
            
            // Start auto-rotation
            startCarousel();
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCarousel);
        } else {
            initCarousel();
        }
    </script>

    <!-- Mobile Sticky CTA Bar (only on mobile) -->
    <div class="mobile-sticky-cta" id="mobileStickyCta">
        <div class="mobile-sticky-cta-content">
            <div class="mobile-sticky-cta-text">
                <span>Ready to elevate your project?</span>
                <small>100+ professional animations available</small>
            </div>
            <button class="mobile-sticky-cta-btn" onclick="document.getElementById('library').scrollIntoView({behavior: 'smooth'})">
                Browse Now
            </button>
        </div>
    </div>

    <!-- Mobile Sticky CTA Trigger Script -->
    <script>
        // Show mobile sticky CTA after scrolling past hero on mobile
        let mobileStickyCta = document.getElementById('mobileStickyCta');
        
        function handleMobileStickyCta() {
            if (window.innerWidth <= 768) {
                if (window.scrollY > window.innerHeight * 0.7) {
                    mobileStickyCta.classList.add('show');
                } else {
                    mobileStickyCta.classList.remove('show');
                }
            } else {
                mobileStickyCta.classList.remove('show');
            }
        }
        
        window.addEventListener('scroll', handleMobileStickyCta);
        window.addEventListener('resize', handleMobileStickyCta);
    </script>

</body>
</html>
